!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.WebAssembly=t():e.WebAssembly=t()}(this,(()=>(()=>{"use strict";var e={51:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=o(636);t.default=class{constructor(){this.funcTypes=[],this.globalTypes=[],this.importFunc=0,this.importGlobal=0,this.tableCount=0,this.memoryCount=0,this.section1=new i.WASMSection,this.section2=new i.WASMSection,this.section3=new i.WASMSection,this.section4=new i.WASMSection,this.section5=new i.WASMSection,this.section6=new i.WASMSection,this.section7=new i.WASMSection,this.section8=new i.WASMSection8Content,this.section9=new i.WASMSection,this.section10=new i.WASMSection,this.section11=new i.WASMSection,this.section12=new i.WASMSection12Content,this.sectionLengths=new Array(13).fill(0)}has_section(e){return 0!==this.sectionLengths[e]}}},156:function(e,t,o){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(928)),n=i(o(973)),_=i(o(316)),a=o(200),s=o(904),p={compile:e=>new Promise(((t,o)=>{if(!(e instanceof ArrayBuffer||e instanceof Uint8Array))return o(new Error("Cannot instantiate a non-buffer object"));t(new r.default(new Uint8Array(e)))})),instantiate:(e,t={})=>new Promise(((o,i)=>{if(!(e instanceof ArrayBuffer||e instanceof Uint8Array))return i(new Error("Cannot instantiate a non-buffer object"));const n=new r.default(new Uint8Array(e));o({module:n,instance:new a.Program(n,t)})})),async instantiateStreaming(e,t={}){e instanceof Promise&&(e=await e);const o=await e.arrayBuffer();return await this.instantiate(o,t)},async compileStreaming(e){e instanceof Promise&&(e=await e);const t=await e.arrayBuffer();return await this.compile(t)},Module:r.default,Instance:a.Program,Table:_.default,Memory:n.default,CompileError:s.CompileError,LinkError:s.LinkError,RuntimeError:s.RuntimeError};t.default=p},175:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(const t of e)switch(t.instr){case r.WASMOPCode.op_global_get:throw new i.CompileError("global_get constexpr not yet supported");case r.WASMOPCode.op_i32_const:case r.WASMOPCode.op_i64_const:case r.WASMOPCode.op_f32_const:case r.WASMOPCode.op_f64_const:return t.immediates[0];default:throw new i.CompileError("Not a constexpr")}throw new i.CompileError("Failed to evaluate constexpr")};const i=o(904),r=o(438)},200:function(e,t,o){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Program=void 0;const r=o(984),n=o(317),_=o(438),a=o(451),s=o(377),p=i(o(973)),u=i(o(316)),c=o(560),l=i(o(175)),f=o(830),S=o(444),d=o(763),M=o(904);function h(e,t){const o=e.funcTypes[t],i=o.args.length;return(...r)=>{const n=[];for(let e=0;e<i;++e)switch(o.args[e]){case a.WASMValueType.i32:n.push((0,d.newI32)(r[e]));break;case a.WASMValueType.f32:n.push((0,d.newF32)(r[e]));break;case a.WASMValueType.i64:n.push((0,d.newI64)(BigInt(r[e])));break;case a.WASMValueType.f64:n.push((0,d.newF64)(r[e]))}return e.run(t,n)}}class A{constructor(e,t,o){this.locals=e,this.pc=t,this.func=o}}function W(e,t,o,i){const r=e[e.length-1-o],n=t.length-i;if(i>0)for(let e=0;e<i;++e)t[r+e]=t[n+e];for(let t=0;t<o+1;t++)e.pop();const _=t.length-(r+i);for(let e=0;e<_;++e)t.pop()}function y(e,t){e.push(t)}function w(e){const t=e[e.length-1];return e.pop(),t}function T(e,t){e.at=4*t,e.at=e.read_u32()}t.Program=class{constructor(e,t){if(this.memory=new p.default({}),this.funcTypes=[],this.globals=[],this.tables=[],this.importedFuncs=[],this.importFuncCount=0,this.importGlobalCount=0,this.funcCount=0,this.exports={},this.code=(0,c.convertToExecForm)(e),this.importFuncCount=e.importFunc,this.importGlobalCount=e.importGlobal,e.has_section(1)&&(this.funcTypes=e.funcTypes.map((t=>e.section1.content[t]))),e.has_section(2)&&this.initializeImports(t,e.section2.content),e.has_section(3)&&(this.funcCount=e.section3.content.length),e.has_section(4)&&this.initializeTables(e.section4.content),e.has_section(5)){let t=0,o=0;for(const i of e.section5.content)t=i.min,o=Math.max(i.max,i.min);this.initializeMemory(t,o)}if(e.has_section(6))for(const t of e.section6.content)this.globals.push((0,l.default)(t.expr));if(e.has_section(9)){if(0===this.tables.length)throw new M.LinkError("Expected a table initialization");for(const t of e.section9.content){const e=(0,l.default)(t.offset).u32;if(e+t.funcrefs.length>this.tables[0].length)throw new M.LinkError("Out of range element initialization");for(let o=0;o<t.funcrefs.length;++o){const i=this.tables[0];i.elements[o+e]=t.funcrefs[o],i.__funcRefs[o+e]=h(this,t.funcrefs[o])}}}if(e.has_section(11))for(const t of e.section11.content){const e=(0,l.default)(t.offset).u32;if(e+t.data.length>this.memory.length)throw new M.LinkError("Out of range data initialization");this.memory._buffer.set(t.data,e)}if(e.has_section(7))for(const t of e.section7.content)switch(t.kind){case 0:this.funcTypes[t.index].args.length,this.exports[t.name]=h(this,t.index);break;case 1:this.exports[t.name]=this.tables[t.index];break;case 2:this.exports[t.name]=this.memory;break;case 3:this.exports[t.name]=new s.WASMExternalGlobal({}),this.exports[t.name]._value=this.globals[t.index]}e.has_section(8)&&this.run(e.section8.index,[])}initializeMemory(e,t){this.memory=new p.default({initial:e,maximum:t})}initializeImports(e,t){let o=0;for(const i of t){const t=i.module,r=i.name;if("object"!=typeof e[t])throw new M.LinkError(`Imported module [${t}] does not exist or is not an object`);switch(i.kind){case 0:{const o=e[t][r];if(!(o instanceof Function))throw new M.LinkError(`Invalid import ${t}.${r}: expected function`);this.importedFuncs.push(o);break}case 1:{const o=e[t][r];if(!(o instanceof u.default))throw new M.LinkError(`Invalid import ${t}.${r}: expected WebAssembly.table`);this.tables.push(o);break}case 2:{const o=e[t][r];if(!(o instanceof p.default))throw new M.LinkError(`Invalid import ${t}.${r}: expected WebAssembly.Memory`);if(o.init!==i.limits.min)throw new M.LinkError("Imported memory initial size wrong");if(o.max!==i.limits.max)throw new M.LinkError("Imported memory maximum size wrong");this.memory=o;break}case 3:{const n=e[t][r];if(!(n instanceof s.WASMExternalGlobal))throw new M.LinkError(`Invalid import ${t}.${r}: expected WebAssembly.Global`);if(n._value.type!==i.type)throw new M.LinkError("Imported global type mismatch");++o,this.globals.push(n._value);break}default:throw new M.LinkError("Unexpected import type")}}if(this.importFuncCount!==this.importedFuncs.length)throw new M.LinkError(`Function import count mismatch: expected ${this.importFuncCount}, got ${this.importedFuncs.length}`);if(this.importGlobalCount!==o)throw new M.LinkError(`Global import count mismatch: expected ${this.importGlobalCount}, got ${o}`)}initializeTables(e){for(const t of e){const e=new u.default({initial:t.limit.min,maximum:t.limit.max});if(t.refKind!==a.WASMRefType.funcref)throw new M.LinkError("External ref table not supported");this.tables.push(e)}}run(e,t){if(e<0||e>=this.funcCount+this.importFuncCount)throw new RangeError("Function index out of range");if(e<this.importFuncCount){console.warn("Attempting to externally call an imported function");const o=new Array(this.funcTypes[e].args.length);for(let e=o.length;e>0;--e)o[e]=t[e].numeric;return this.importedFuncs[e](...o)}const o=new r.FixedLengthReader(this.code);T(o,e-this.importFuncCount);const i=[],s=[];let p=this.memory._buffer,u=o.read_ctrl_arg(),c=o.read_ctrl_arg(),l=new Array(u+c);const h=[];if(u!==t.length)throw new RangeError(`Expected ${u} arguments to function call, got ${t.length}`);for(let o=0;o<u;++o){if(this.funcTypes[e].args[o]!==t[o].type)throw new TypeError(`Function expected [${(0,a.typeArrayToString)(this.funcTypes[e].args)}], got [${(0,a.typeArrayToString)(t.map((e=>e.type)))}]`);l[o]=t[o]}for(let e=0;e<c;++e)l[u+e]=(0,d.newValue)();for(;;){const t=o.read_instr();switch(t){case _.WASMOPCode.op_unreachable:throw new M.RuntimeError("Unreachable");case _.WASMOPCode.op_if:{const e=o.read_u32();if(0===w(i).i32){o.at=e;break}}case _.WASMOPCode.op_else:case _.WASMOPCode.op_block:case _.WASMOPCode.op_loop:{const e=o.read_ctrl_arg();h.push(i.length-e)}case _.WASMOPCode.op_nop:break;case _.WASMOPCode.op_end:h.pop();break;case _.WASMOPCode.op_br:{const e=o.read_ctrl_arg(),t=o.read_u32(),r=o.read_ctrl_arg();o.at=t,W(h,i,r,e);break}case _.WASMOPCode.op_br_if:{const e=o.read_ctrl_arg(),t=o.read_u32(),r=o.read_ctrl_arg();0!==w(i).i32&&(o.at=t,W(h,i,r,e));break}case _.WASMOPCode.op_br_table:{const e=o.read_ctrl_arg(),t=o.read_ctrl_arg(),n=w(i).i32,_=o.at;o.at=n>=0&&n<t?_+n*(4+r.CTRL_ARG_BYTELEN):_+t*(4+r.CTRL_ARG_BYTELEN);const a=o.read_u32(),s=o.read_ctrl_arg();o.at=a,W(h,i,s,e);break}case _.WASMOPCode.op_return:{const t=o.read_ctrl_arg(),r=o.read_ctrl_arg();if(0===s.length){if(this.funcTypes[e].rets.length!==i.length)throw new M.RuntimeError(`Expected ${this.funcTypes[e].rets.length} on return, got ${i.length}`);return 1===i.length?w(i).numeric:i.map((e=>e.numeric))}{const n=s.pop();if(void 0===n)throw new M.RuntimeError("Call Frame undefined, impossible");l=n.locals,o.at=n.pc,e=n.func,t>0&&W(h,i,t-1,r)}break}case _.WASMOPCode.op_call_indirect:case _.WASMOPCode.op_call:{let r=0;if(t===_.WASMOPCode.op_call)r=o.read_ctrl_arg();else{const e=w(i).i32;if(0===this.tables.length)throw new M.RuntimeError("No table to index into for call_indirect");if(e<0||e>=this.tables[0].length)throw new M.RuntimeError(`Table index ${e} out of range`);r=this.tables[0].elements[e]}if(r<this.importFuncCount){const e=new Array(this.funcTypes[r].args.length);for(let t=e.length;t>0;--t)e[t-1]=w(i).numeric;let t=this.importedFuncs[r](...e);const o=this.funcTypes[r].rets.length;t=1===o?[t]:t;for(let e=0;e<o;++e){const o=this.funcTypes[r].rets[e],n=t[e];switch(o){case a.WASMValueType.i32:y(i,(0,d.newI32)(n));break;case a.WASMValueType.f32:y(i,(0,d.newF32)(n));break;case a.WASMValueType.i64:y(i,(0,d.newI64)(BigInt(n)));break;case a.WASMValueType.f64:y(i,(0,d.newF64)(n));case a.WASMValueType.nil:}}break}if(s.length>=300)throw new M.RuntimeError("Maximum call stack size of 300 exceeded");const p=new A(l,o.at,e);s.push(p),e=r,T(o,r-this.importFuncCount);const u=o.read_ctrl_arg(),c=o.read_ctrl_arg();l=new Array(u+c);for(let e=u;e>0;--e)l[e-1]=(0,d.cloneValue)(w(i));for(let e=0;e<c;++e)l[e+u]=new n.WASMValue;break}case _.WASMOPCode.op_drop:w(i);break;case _.WASMOPCode.op_select:{const e=w(i).i32,t=w(i),o=w(i);y(i,0!==e?o:t);break}case _.WASMOPCode.op_local_get:{const e=o.read_ctrl_arg();if(e>=l.length)throw new M.RuntimeError(`Local index ${e} OOB`);y(i,(0,d.cloneValue)(l[e]));break}case _.WASMOPCode.op_local_set:{const e=o.read_ctrl_arg();if(e>=l.length)throw new M.RuntimeError(`Local index ${e} OOB`);l[e]=w(i);break}case _.WASMOPCode.op_local_tee:{const e=o.read_ctrl_arg();if(e>=l.length)throw new M.RuntimeError(`Local index ${e} OOB`);const t=w(i);l[e]=(0,d.cloneValue)(t),y(i,t);break}case _.WASMOPCode.op_global_get:{const e=o.read_ctrl_arg();if(e>=this.globals.length)throw new M.RuntimeError(`Global index ${e} OOB`);y(i,(0,d.cloneValue)(this.globals[e]));break}case _.WASMOPCode.op_global_set:{const e=o.read_ctrl_arg();if(e>=this.globals.length)throw new M.RuntimeError(`Global index ${e} OOB`);const t=w(i);this.globals[e].set(t);break}case _.WASMOPCode.op_i32_load:{const e=o.read_u32(),t=w(i).i32;(0,S.toConvert)(p,t+e,4),y(i,(0,d.newI32)(S.CONVERSION_INT32[0]));break}case _.WASMOPCode.op_i64_load:{const e=o.read_u32(),t=w(i).i32;(0,S.toConvert)(p,t+e,8),y(i,(0,d.newI64)(S.CONVERSION_INT64[0]));break}case _.WASMOPCode.op_f32_load:{const e=o.read_u32(),t=w(i).i32;(0,S.toConvert)(p,t+e,4),y(i,(0,d.newF32)(S.CONVERSION_FLOAT32[0]));break}case _.WASMOPCode.op_f64_load:{const e=o.read_u32(),t=w(i).i32;(0,S.toConvert)(p,t+e,8),y(i,(0,d.newF64)(S.CONVERSION_FLOAT64[0]));break}case _.WASMOPCode.op_i32_load8_s:{const e=o.read_u32(),t=w(i).i32;(0,S.toConvert)(p,t+e,1),y(i,(0,d.newI32)(S.CONVERSION_INT8[0]));break}case _.WASMOPCode.op_i32_load8_u:{const e=o.read_u32(),t=w(i).i32;(0,S.toConvert)(p,t+e,1),y(i,(0,d.newI32)(S.CONVERSION_UINT8[0]));break}case _.WASMOPCode.op_i32_load16_s:{const e=o.read_u32(),t=w(i).i32;(0,S.toConvert)(p,t+e,2),y(i,(0,d.newI32)(S.CONVERSION_INT16[0]));break}case _.WASMOPCode.op_i32_load16_u:{const e=o.read_u32(),t=w(i).i32;(0,S.toConvert)(p,t+e,2),y(i,(0,d.newI32)(S.CONVERSION_UINT16[0]));break}case _.WASMOPCode.op_i64_load8_s:{const e=o.read_u32(),t=w(i).i32;(0,S.toConvert)(p,t+e,1),y(i,(0,d.newI64)(BigInt(S.CONVERSION_INT8[0])));break}case _.WASMOPCode.op_i64_load8_u:{const e=o.read_u32(),t=w(i).i32;(0,S.toConvert)(p,t+e,1),y(i,(0,d.newI64)(BigInt(S.CONVERSION_UINT8[0])));break}case _.WASMOPCode.op_i64_load16_s:{const e=o.read_u32(),t=w(i).i32;(0,S.toConvert)(p,t+e,2),y(i,(0,d.newI64)(BigInt(S.CONVERSION_INT16[0])));break}case _.WASMOPCode.op_i64_load16_u:{const e=o.read_u32(),t=w(i).i32;(0,S.toConvert)(p,t+e,2),y(i,(0,d.newI64)(BigInt(S.CONVERSION_UINT16[0])));break}case _.WASMOPCode.op_i64_load32_s:{const e=o.read_u32(),t=w(i).i32;(0,S.toConvert)(p,t+e,4),y(i,(0,d.newI64)(BigInt(S.CONVERSION_INT32[0])));break}case _.WASMOPCode.op_i64_load32_u:{const e=o.read_u32(),t=w(i).i32;(0,S.toConvert)(p,t+e,4),y(i,(0,d.newI64)(BigInt(S.CONVERSION_UINT32[0])));break}case _.WASMOPCode.op_i32_store:{const e=o.read_u32(),t=w(i).i32,r=w(i).i32;S.CONVERSION_INT32[0]=t,(0,S.fromConvert)(p,r+e,4);break}case _.WASMOPCode.op_i64_store:{const e=o.read_u32(),t=w(i).i64,r=w(i).i32;S.CONVERSION_INT64[0]=t,(0,S.fromConvert)(p,r+e,8);break}case _.WASMOPCode.op_f32_store:{const e=o.read_u32(),t=w(i).f32,r=w(i).i32;S.CONVERSION_FLOAT32[0]=t,(0,S.fromConvert)(p,r+e,4);break}case _.WASMOPCode.op_f64_store:{const e=o.read_u32(),t=w(i).f64,r=w(i).i32;S.CONVERSION_FLOAT64[0]=t,(0,S.fromConvert)(p,r+e,8);break}case _.WASMOPCode.op_i32_store8:{const e=o.read_u32(),t=w(i).i32,r=w(i).i32;S.CONVERSION_INT32[0]=t,(0,S.fromConvert)(p,r+e,1);break}case _.WASMOPCode.op_i32_store16:{const e=o.read_u32(),t=w(i).i32,r=w(i).i32;S.CONVERSION_INT32[0]=t,(0,S.fromConvert)(p,r+e,2);break}case _.WASMOPCode.op_i64_store8:{const e=o.read_u32(),t=w(i).i64,r=w(i).i32;S.CONVERSION_INT64[0]=t,(0,S.fromConvert)(p,r+e,1);break}case _.WASMOPCode.op_i64_store16:{const e=o.read_u32(),t=w(i).i64,r=w(i).i32;S.CONVERSION_INT64[0]=t,(0,S.fromConvert)(p,r+e,2);break}case _.WASMOPCode.op_i64_store32:{const e=o.read_u32(),t=w(i).i64,r=w(i).i32;S.CONVERSION_INT64[0]=t,(0,S.fromConvert)(p,r+e,4);break}case _.WASMOPCode.op_memory_size:y(i,(0,d.newI32)(this.memory.init));break;case _.WASMOPCode.op_memory_grow:y(i,(0,d.newI32)(this.memory.init)),console.warn("Memory grow not implemented");break;case _.WASMOPCode.op_i32_const:y(i,(0,d.newI32)(o.read_i32()));break;case _.WASMOPCode.op_i64_const:y(i,(0,d.newI64)(o.read_i64()));break;case _.WASMOPCode.op_f32_const:y(i,(0,d.newF32)(o.read_f32()));break;case _.WASMOPCode.op_f64_const:y(i,(0,d.newF64)(o.read_f64()));break;case _.WASMOPCode.op_i32_eqz:{const e=w(i).i32;y(i,(0,d.newI32)((0,f.toTruthy)(0===e)));break}case _.WASMOPCode.op_i32_eq:{const e=w(i).i32,t=w(i).i32;y(i,(0,d.newI32)((0,f.toTruthy)(t===e)));break}case _.WASMOPCode.op_i32_ne:{const e=w(i).i32,t=w(i).i32;y(i,(0,d.newI32)((0,f.toTruthy)(t!==e)));break}case _.WASMOPCode.op_i32_lt_s:{const e=w(i).i32,t=w(i).i32;y(i,(0,d.newI32)((0,f.toTruthy)(t<e)));break}case _.WASMOPCode.op_i32_lt_u:{S.CONVERSION_INT32[0]=w(i).i32;const e=S.CONVERSION_UINT32[0];S.CONVERSION_INT32[0]=w(i).i32;const t=S.CONVERSION_UINT32[0];y(i,(0,d.newI32)((0,f.toTruthy)(t<e)));break}case _.WASMOPCode.op_i32_gt_s:{const e=w(i).i32,t=w(i).i32;y(i,(0,d.newI32)((0,f.toTruthy)(t>e)));break}case _.WASMOPCode.op_i32_gt_u:{S.CONVERSION_INT32[0]=w(i).i32;const e=S.CONVERSION_UINT32[0];S.CONVERSION_INT32[0]=w(i).i32;const t=S.CONVERSION_UINT32[0];y(i,(0,d.newI32)((0,f.toTruthy)(t>e)));break}case _.WASMOPCode.op_i32_le_s:{const e=w(i).i32,t=w(i).i32;y(i,(0,d.newI32)((0,f.toTruthy)(t<=e)));break}case _.WASMOPCode.op_i32_le_u:{S.CONVERSION_INT32[0]=w(i).i32;const e=S.CONVERSION_UINT32[0];S.CONVERSION_INT32[0]=w(i).i32;const t=S.CONVERSION_UINT32[0];y(i,(0,d.newI32)((0,f.toTruthy)(t<=e)));break}case _.WASMOPCode.op_i32_ge_s:{const e=w(i).i32,t=w(i).i32;y(i,(0,d.newI32)((0,f.toTruthy)(t>=e)));break}case _.WASMOPCode.op_i32_ge_u:{S.CONVERSION_INT32[0]=w(i).i32;const e=S.CONVERSION_UINT32[0];S.CONVERSION_INT32[0]=w(i).i32;const t=S.CONVERSION_UINT32[0];y(i,(0,d.newI32)((0,f.toTruthy)(t>=e)));break}case _.WASMOPCode.op_i64_eqz:{const e=w(i).i64;y(i,(0,d.newI32)((0,f.toTruthy)(e===BigInt(0))));break}case _.WASMOPCode.op_i64_eq:{const e=w(i).i64,t=w(i).i64;y(i,(0,d.newI32)((0,f.toTruthy)(t===e)));break}case _.WASMOPCode.op_i64_ne:{const e=w(i).i64,t=w(i).i64;y(i,(0,d.newI32)((0,f.toTruthy)(t!==e)));break}case _.WASMOPCode.op_i64_lt_s:{const e=w(i).i64,t=w(i).i64;y(i,(0,d.newI32)((0,f.toTruthy)(t<e)));break}case _.WASMOPCode.op_i64_lt_u:{S.CONVERSION_INT64[0]=w(i).i64;const e=S.CONVERSION_UINT64[0];S.CONVERSION_INT64[0]=w(i).i64;const t=S.CONVERSION_UINT64[0];y(i,(0,d.newI32)((0,f.toTruthy)(t<e)));break}case _.WASMOPCode.op_i64_gt_s:{const e=w(i).i64,t=w(i).i64;y(i,(0,d.newI32)((0,f.toTruthy)(t>e)));break}case _.WASMOPCode.op_i64_gt_u:{S.CONVERSION_INT64[0]=w(i).i64;const e=S.CONVERSION_UINT64[0];S.CONVERSION_INT64[0]=w(i).i64;const t=S.CONVERSION_UINT64[0];y(i,(0,d.newI32)((0,f.toTruthy)(t>e)));break}case _.WASMOPCode.op_i64_le_s:{const e=w(i).i64,t=w(i).i64;y(i,(0,d.newI32)((0,f.toTruthy)(t<=e)));break}case _.WASMOPCode.op_i64_le_u:{S.CONVERSION_INT64[0]=w(i).i64;const e=S.CONVERSION_UINT64[0];S.CONVERSION_INT64[0]=w(i).i64;const t=S.CONVERSION_UINT64[0];y(i,(0,d.newI32)((0,f.toTruthy)(t<=e)));break}case _.WASMOPCode.op_i64_ge_s:{const e=w(i).i64,t=w(i).i64;y(i,(0,d.newI32)((0,f.toTruthy)(t>=e)));break}case _.WASMOPCode.op_i64_ge_u:{S.CONVERSION_INT64[0]=w(i).i64;const e=S.CONVERSION_UINT64[0];S.CONVERSION_INT64[0]=w(i).i64;const t=S.CONVERSION_UINT64[0];y(i,(0,d.newI32)((0,f.toTruthy)(t>=e)));break}case _.WASMOPCode.op_f32_eq:{const e=w(i).f32,t=w(i).f32;y(i,(0,d.newI32)((0,f.toTruthy)(t===e)));break}case _.WASMOPCode.op_f32_ne:{const e=w(i).f32,t=w(i).f32;y(i,(0,d.newI32)((0,f.toTruthy)(t!==e)));break}case _.WASMOPCode.op_f32_lt:{const e=w(i).f32,t=w(i).f32;y(i,(0,d.newI32)((0,f.toTruthy)(t<e)));break}case _.WASMOPCode.op_f32_le:{const e=w(i).f32,t=w(i).f32;y(i,(0,d.newI32)((0,f.toTruthy)(t<=e)));break}case _.WASMOPCode.op_f32_gt:{const e=w(i).f32,t=w(i).f32;y(i,(0,d.newI32)((0,f.toTruthy)(t>e)));break}case _.WASMOPCode.op_f32_ge:{const e=w(i).f32,t=w(i).f32;y(i,(0,d.newI32)((0,f.toTruthy)(t>=e)));break}case _.WASMOPCode.op_f64_eq:{const e=w(i).f64,t=w(i).f64;y(i,(0,d.newI32)((0,f.toTruthy)(t===e)));break}case _.WASMOPCode.op_f64_ne:{const e=w(i).f64,t=w(i).f64;y(i,(0,d.newI32)((0,f.toTruthy)(t!==e)));break}case _.WASMOPCode.op_f64_lt:{const e=w(i).f64,t=w(i).f64;y(i,(0,d.newI32)((0,f.toTruthy)(t<e)));break}case _.WASMOPCode.op_f64_le:{const e=w(i).f64,t=w(i).f64;y(i,(0,d.newI32)((0,f.toTruthy)(t<=e)));break}case _.WASMOPCode.op_f64_gt:{const e=w(i).f64,t=w(i).f64;y(i,(0,d.newI32)((0,f.toTruthy)(t>e)));break}case _.WASMOPCode.op_f64_ge:{const e=w(i).f64,t=w(i).f64;y(i,(0,d.newI32)((0,f.toTruthy)(t>=e)));break}case _.WASMOPCode.op_i32_clz:{const e=w(i).i32;y(i,(0,d.newI32)(Math.clz32(e)));break}case _.WASMOPCode.op_i32_ctz:{const e=w(i).i32>>>0;y(i,(0,d.newI32)((0,f.ctz32)(e)));break}case _.WASMOPCode.op_i32_popcnt:{const e=w(i).i32>>>0;y(i,(0,d.newI32)((0,f.popcnt32)(e)));break}case _.WASMOPCode.op_i32_add:{const e=w(i).i32,t=w(i).i32;y(i,(0,d.newI32)(t+e));break}case _.WASMOPCode.op_i32_sub:{const e=w(i).i32,t=w(i).i32;y(i,(0,d.newI32)(t-e));break}case _.WASMOPCode.op_i32_mul:{const e=w(i).i32,t=w(i).i32;y(i,(0,d.newI32)(Math.imul(t,e)));break}case _.WASMOPCode.op_i32_div_s:{const e=w(i).i32,t=w(i).i32;if(0===e)throw new M.RuntimeError("Division by 0");y(i,(0,d.newI32)(t/e));break}case _.WASMOPCode.op_i32_div_u:{const e=w(i).i32>>>0,t=w(i).i32>>>0;if(0===e)throw new M.RuntimeError("Division by 0");y(i,(0,d.newI32)(t/e));break}case _.WASMOPCode.op_i32_rem_s:{const e=w(i).i32,t=w(i).i32;if(0===e)throw new M.RuntimeError("Remainder by 0");y(i,(0,d.newI32)(t%e));break}case _.WASMOPCode.op_i32_rem_u:{const e=w(i).i32>>>0,t=w(i).i32>>>0;if(0===e)throw new M.RuntimeError("Remainder by 0");y(i,(0,d.newI32)(t%e));break}case _.WASMOPCode.op_i32_and:{const e=w(i).i32,t=w(i).i32;y(i,(0,d.newI32)(t&e));break}case _.WASMOPCode.op_i32_or:{const e=w(i).i32,t=w(i).i32;y(i,(0,d.newI32)(t|e));break}case _.WASMOPCode.op_i32_xor:{const e=w(i).i32,t=w(i).i32;y(i,(0,d.newI32)(t^e));break}case _.WASMOPCode.op_i32_shl:{const e=w(i).i32,t=w(i).i32;y(i,(0,d.newI32)(t<<e));break}case _.WASMOPCode.op_i32_shr_s:{const e=w(i).i32,t=w(i).i32;y(i,(0,d.newI32)(t>>e));break}case _.WASMOPCode.op_i32_shr_u:{const e=w(i).i32,t=w(i).i32;y(i,(0,d.newI32)(t>>>e));break}case _.WASMOPCode.op_i32_rotl:{const e=w(i).i32,t=w(i).i32;y(i,(0,d.newI32)((0,f.rotl32)(t,e)));break}case _.WASMOPCode.op_i32_rotr:{const e=w(i).i32,t=w(i).i32;y(i,(0,d.newI32)((0,f.rotr32)(t,e)));break}case _.WASMOPCode.op_i64_clz:S.CONVERSION_UINT64[0]=w(i).i64,0===S.CONVERSION_UINT32[1]?y(i,(0,d.newI64)(BigInt(32+Math.clz32(S.CONVERSION_UINT32[0])))):y(i,(0,d.newI64)(BigInt(Math.clz32(S.CONVERSION_UINT32[1]))));break;case _.WASMOPCode.op_i64_ctz:S.CONVERSION_UINT64[0]=w(i).i64,0===S.CONVERSION_UINT32[0]?y(i,(0,d.newI64)(BigInt(32+(0,f.ctz32)(S.CONVERSION_UINT32[1])))):y(i,(0,d.newI64)(BigInt((0,f.ctz32)(S.CONVERSION_UINT32[0]))));break;case _.WASMOPCode.op_i64_popcnt:S.CONVERSION_UINT64[0]=w(i).i64,y(i,(0,d.newI64)(BigInt((0,f.popcnt32)(S.CONVERSION_UINT32[0])+(0,f.popcnt32)(S.CONVERSION_UINT32[1]))));break;case _.WASMOPCode.op_i64_add:{const e=w(i).i64,t=w(i).i64;y(i,(0,d.newI64)(t+e));break}case _.WASMOPCode.op_i64_sub:{const e=w(i).i64,t=w(i).i64;y(i,(0,d.newI64)(t-e));break}case _.WASMOPCode.op_i64_mul:{const e=w(i).i64,t=w(i).i64;y(i,(0,d.newI64)(t*e));break}case _.WASMOPCode.op_i64_div_s:{const e=w(i).i64,t=w(i).i64;if(e===BigInt(0))throw new M.RuntimeError("Division by 0");y(i,(0,d.newI64)(t/e));break}case _.WASMOPCode.op_i64_div_u:{S.CONVERSION_INT64[0]=w(i).i64;const e=S.CONVERSION_UINT64[0];S.CONVERSION_INT64[0]=w(i).i64;const t=S.CONVERSION_UINT64[0];if(e===BigInt(0))throw new M.RuntimeError("Division by 0");y(i,(0,d.newI64)(t/e));break}case _.WASMOPCode.op_i64_rem_s:{const e=w(i).i64,t=w(i).i64;if(e===BigInt(0))throw new M.RuntimeError("Remainder by 0");y(i,(0,d.newI64)(t%e));break}case _.WASMOPCode.op_i64_rem_u:{S.CONVERSION_INT64[0]=w(i).i64;const e=S.CONVERSION_UINT64[0];S.CONVERSION_INT64[0]=w(i).i64;const t=S.CONVERSION_UINT64[0];if(e===BigInt(0))throw new M.RuntimeError("Remainder by 0");y(i,(0,d.newI64)(t%e));break}case _.WASMOPCode.op_i64_and:{const e=w(i).i64,t=w(i).i64;y(i,(0,d.newI64)(t&e));break}case _.WASMOPCode.op_i64_or:{const e=w(i).i64,t=w(i).i64;y(i,(0,d.newI64)(t|e));break}case _.WASMOPCode.op_i64_xor:{const e=w(i).i64,t=w(i).i64;y(i,(0,d.newI64)(t^e));break}case _.WASMOPCode.op_i64_shl:{const e=w(i).i64,t=w(i).i64;y(i,(0,d.newI64)(t<<e));break}case _.WASMOPCode.op_i64_shr_s:{const e=w(i).i64,t=w(i).i64;y(i,(0,d.newI64)(t>>e));break}case _.WASMOPCode.op_i64_shr_u:{const e=w(i).i64;S.CONVERSION_INT64[0]=w(i).i64;const t=S.CONVERSION_UINT64[0];y(i,(0,d.newI64)(t>>e));break}case _.WASMOPCode.op_i64_rotl:{const e=w(i).i64;S.CONVERSION_INT64[0]=w(i).i64;const t=S.CONVERSION_UINT64[0];y(i,(0,d.newI64)((0,f.rotl64)(t,e)));break}case _.WASMOPCode.op_i64_rotr:{const e=w(i).i64;S.CONVERSION_INT64[0]=w(i).i64;const t=S.CONVERSION_UINT64[0];y(i,(0,d.newI64)((0,f.rotr64)(t,e)));break}case _.WASMOPCode.op_f32_abs:{const e=w(i).f32;y(i,(0,d.newF32)(Math.abs(e)));break}case _.WASMOPCode.op_f32_neg:{const e=w(i).f32;y(i,(0,d.newF32)(-e));break}case _.WASMOPCode.op_f32_ceil:{const e=w(i).f32;y(i,(0,d.newF32)(Math.ceil(e)));break}case _.WASMOPCode.op_f32_floor:{const e=w(i).f32;y(i,(0,d.newF32)(Math.floor(e)));break}case _.WASMOPCode.op_f32_trunc:{const e=w(i).f32;y(i,(0,d.newF32)(Math.trunc(e)));break}case _.WASMOPCode.op_f32_nearest:{const e=w(i).f32;y(i,(0,d.newF32)(Math.round(e)));break}case _.WASMOPCode.op_f32_sqrt:{const e=w(i).f32;y(i,(0,d.newF32)(Math.sqrt(e)));break}case _.WASMOPCode.op_f32_add:{const e=w(i).f32,t=w(i).f32;y(i,(0,d.newF32)(t+e));break}case _.WASMOPCode.op_f32_sub:{const e=w(i).f32,t=w(i).f32;y(i,(0,d.newF32)(t-e));break}case _.WASMOPCode.op_f32_mul:{const e=w(i).f32,t=w(i).f32;y(i,(0,d.newF32)(t*e));break}case _.WASMOPCode.op_f32_div:{const e=w(i).f32,t=w(i).f32;y(i,(0,d.newF32)(t/e));break}case _.WASMOPCode.op_f32_min:{const e=w(i).f32,t=w(i).f32;y(i,(0,d.newF32)(Math.min(t,e)));break}case _.WASMOPCode.op_f32_max:{const e=w(i).f32,t=w(i).f32;y(i,(0,d.newF32)(Math.max(t,e)));break}case _.WASMOPCode.op_f32_copysign:{const e=w(i).f32,t=w(i).f32;Math.sign(e)===Math.sign(t)?y(i,(0,d.newF32)(t)):y(i,(0,d.newF32)(-t));break}case _.WASMOPCode.op_f64_abs:{const e=w(i).f64;y(i,(0,d.newF64)(Math.abs(e)));break}case _.WASMOPCode.op_f64_neg:{const e=w(i).f64;y(i,(0,d.newF64)(-e));break}case _.WASMOPCode.op_f64_ceil:{const e=w(i).f64;y(i,(0,d.newF64)(Math.ceil(e)));break}case _.WASMOPCode.op_f64_floor:{const e=w(i).f64;y(i,(0,d.newF64)(Math.floor(e)));break}case _.WASMOPCode.op_f64_trunc:{const e=w(i).f64;y(i,(0,d.newF64)(Math.trunc(e)));break}case _.WASMOPCode.op_f64_nearest:{const e=w(i).f64;y(i,(0,d.newF64)(Math.round(e)));break}case _.WASMOPCode.op_f64_sqrt:{const e=w(i).f64;y(i,(0,d.newF64)(Math.sqrt(e)));break}case _.WASMOPCode.op_f64_add:{const e=w(i).f64,t=w(i).f64;y(i,(0,d.newF64)(t+e));break}case _.WASMOPCode.op_f64_sub:{const e=w(i).f64,t=w(i).f64;y(i,(0,d.newF64)(t-e));break}case _.WASMOPCode.op_f64_mul:{const e=w(i).f64,t=w(i).f64;y(i,(0,d.newF64)(t*e));break}case _.WASMOPCode.op_f64_div:{const e=w(i).f64,t=w(i).f64;y(i,(0,d.newF64)(t/e));break}case _.WASMOPCode.op_f64_min:{const e=w(i).f64,t=w(i).f64;y(i,(0,d.newF64)(Math.min(t,e)));break}case _.WASMOPCode.op_f64_max:{const e=w(i).f64,t=w(i).f64;y(i,(0,d.newF64)(Math.max(t,e)));break}case _.WASMOPCode.op_f64_copysign:{const e=w(i).f64,t=w(i).f64;Math.sign(e)===Math.sign(t)?y(i,(0,d.newF64)(t)):y(i,(0,d.newF64)(-t));break}case _.WASMOPCode.op_i32_wrap_i64:{const e=w(i).i64;S.CONVERSION_UINT64[0]=e,y(i,(0,d.newI32)(S.CONVERSION_INT32[0]));break}case _.WASMOPCode.op_i32_trunc_f32_s:{const e=Math.fround(Math.trunc(w(i).f32));if(e<-2147483648||e>2147483647)throw new M.RuntimeError("Float unrepresentable as a signed int32");y(i,(0,d.newI32)(0|e));break}case _.WASMOPCode.op_i32_trunc_f32_u:{const e=Math.fround(Math.trunc(w(i).f32));if(e<0||e>4294967295)throw new M.RuntimeError("Float unrepresentable as an unsigned int32");y(i,(0,d.newI32)(0|e));break}case _.WASMOPCode.op_i32_trunc_f64_s:{const e=Math.trunc(w(i).f64);if(e<-2147483648||e>2147483647)throw new M.RuntimeError("Float unrepresentable as a signed int32");y(i,(0,d.newI32)(0|e));break}case _.WASMOPCode.op_i32_trunc_f64_u:{const e=Math.trunc(w(i).f64);if(e<0||e>4294967295)throw new M.RuntimeError("Float unrepresentable as an unsigned int32");y(i,(0,d.newI32)(0|e));break}case _.WASMOPCode.op_i64_extend_i32_s:{const e=w(i).i32;y(i,(0,d.newI64)(BigInt(e)));break}case _.WASMOPCode.op_i64_extend_i32_u:{const e=w(i).i32;y(i,(0,d.newI64)(BigInt(0|e)));break}case _.WASMOPCode.op_i64_trunc_f32_s:{const e=BigInt(Math.fround(Math.trunc(w(i).f32)));if(e<-BigInt("0x8000000000000000")||e>BigInt("0x7FFFFFFFFFFFFFFF"))throw new M.RuntimeError("Float unrepresentable as a signed int64");S.CONVERSION_INT64[0]=e,y(i,(0,d.newI64)(S.CONVERSION_INT64[0]));break}case _.WASMOPCode.op_i64_trunc_f32_u:{const e=BigInt(Math.fround(Math.trunc(w(i).f32)));if(e<BigInt(0)||e>BigInt("0xFFFFFFFFFFFFFFFF"))throw new M.RuntimeError("Float unrepresentable as a signed int64");S.CONVERSION_UINT64[0]=e,y(i,(0,d.newI64)(S.CONVERSION_INT64[0]));break}case _.WASMOPCode.op_i64_trunc_f64_s:{const e=BigInt(Math.trunc(w(i).f64));if(e<-BigInt("0x8000000000000000")||e>BigInt("0x7FFFFFFFFFFFFFFF"))throw new M.RuntimeError("Float unrepresentable as a signed int64");S.CONVERSION_INT64[0]=e,y(i,(0,d.newI64)(S.CONVERSION_INT64[0]));break}case _.WASMOPCode.op_i64_trunc_f64_u:{const e=BigInt(Math.trunc(w(i).f64));if(e<BigInt(0)||e>BigInt("0xFFFFFFFFFFFFFFFF"))throw new M.RuntimeError("Float unrepresentable as a signed int64");S.CONVERSION_UINT64[0]=e,y(i,(0,d.newI64)(S.CONVERSION_INT64[0]));break}case _.WASMOPCode.op_f32_convert_i32_s:{const e=Math.fround(0|w(i).i32);y(i,(0,d.newF32)(e));break}case _.WASMOPCode.op_f32_convert_i32_u:{const e=Math.fround(w(i).i32>>>0);y(i,(0,d.newF32)(e));break}case _.WASMOPCode.op_f32_convert_i64_s:{const e=Math.fround(0|Number(w(i).i64));y(i,(0,d.newF32)(e));break}case _.WASMOPCode.op_f32_convert_i64_u:{const e=Math.fround(Number(w(i).i64)>>>0);y(i,(0,d.newF32)(e));break}case _.WASMOPCode.op_f32_demote_f64:{const e=Math.fround(w(i).f64);y(i,(0,d.newF32)(e));break}case _.WASMOPCode.op_f64_convert_i32_s:{const e=w(i).i32;y(i,(0,d.newF64)(e));break}case _.WASMOPCode.op_f64_convert_i32_u:{const e=w(i).i32>>>0;y(i,(0,d.newF64)(e));break}case _.WASMOPCode.op_f64_convert_i64_s:{const e=Number(w(i).i64);y(i,(0,d.newF64)(e));break}case _.WASMOPCode.op_f64_convert_i64_u:{S.CONVERSION_INT64[0]=w(i).i64;const e=Number(S.CONVERSION_UINT64[0]);y(i,(0,d.newF64)(e));break}case _.WASMOPCode.op_f64_promote_f32:{const e=w(i).f32;y(i,(0,d.newF64)(e));break}case _.WASMOPCode.op_i32_reinterpret_f32:S.CONVERSION_FLOAT32[0]=w(i).f32,y(i,(0,d.newI32)(S.CONVERSION_INT32[0]));break;case _.WASMOPCode.op_i64_reinterpret_f64:S.CONVERSION_FLOAT64[0]=w(i).f64,y(i,(0,d.newI64)(S.CONVERSION_INT64[0]));break;case _.WASMOPCode.op_f32_reinterpret_i32:S.CONVERSION_INT32[0]=w(i).i32,y(i,(0,d.newF32)(S.CONVERSION_FLOAT32[0]));break;case _.WASMOPCode.op_f64_reinterpret_i64:S.CONVERSION_INT64[0]=w(i).i64,y(i,(0,d.newF64)(S.CONVERSION_FLOAT64[0]));break;case _.WASMOPCode.op_i32_extend8_s:{const e=w(i).i32;S.CONVERSION_UINT8[0]=e,y(i,(0,d.newI32)(S.CONVERSION_INT32[0]));break}case _.WASMOPCode.op_i32_extend16_s:{const e=w(i).i32;S.CONVERSION_UINT16[0]=e,y(i,(0,d.newI32)(S.CONVERSION_INT32[0]));break}case _.WASMOPCode.op_i64_extend8_s:{const e=w(i).i64;S.CONVERSION_UINT8[0]=Number(e),y(i,(0,d.newI64)(S.CONVERSION_INT64[0]));break}case _.WASMOPCode.op_i64_extend16_s:{const e=w(i).i64;S.CONVERSION_UINT8[0]=Number(e),y(i,(0,d.newI64)(S.CONVERSION_INT64[0]));break}case _.WASMOPCode.op_i64_extend32_s:{const e=w(i).i64;S.CONVERSION_UINT8[0]=Number(e),y(i,(0,d.newI64)(S.CONVERSION_INT64[0]));break}case _.WASMOPCode.op_memory_copy:{const e=w(i).i32,t=w(i).i32,o=w(i).i32;if(o<=t)for(let i=0;i<e;++i)this.memory._buffer[i+o]=this.memory._buffer[i+t];else for(let i=e;i>0;--i)this.memory._buffer[o-i-1]=this.memory._buffer[t-i-1];break}case _.WASMOPCode.op_memory_fill:{const e=w(i).i32,t=w(i).i32,o=w(i).i32;for(let i=0;i<e;++i)this.memory._buffer[o+i]=t;break}case _.WASMOPCode.op_i32_trunc_sat_f32_s:{const e=Math.trunc(w(i).f32);y(i,(0,d.newI32)(0|e));break}case _.WASMOPCode.op_i32_trunc_sat_f32_u:{const e=Math.trunc(w(i).f32);y(i,(0,d.newI32)(e>>>0));break}case _.WASMOPCode.op_i32_trunc_sat_f64_s:{const e=Math.trunc(w(i).f64);y(i,(0,d.newI32)(0|e));break}case _.WASMOPCode.op_i32_trunc_sat_f64_u:{const e=Math.trunc(w(i).f64);y(i,(0,d.newI32)(e>>>0));break}default:throw new M.RuntimeError(`Invalid opcode ${t}`)}}}}},223:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=o(984),r=o(317),n=o(904),_=o(438),a=o(636),s=o(451),p=o(818);t.default=class{constructor(e){this.currErrStr="",this.bin=e,this.lexer=new i.Reader(e)}dumpErr(e){return`${this.currErrStr}${e} (0x${this.lexer.at.toString(16)})`}readValueType(){const e=this.lexer.read_uint8();switch(e){case s.WASMValueType.i32:case s.WASMValueType.f32:case s.WASMValueType.i64:case s.WASMValueType.f64:case s.WASMValueType.nil:return e}throw new TypeError(this.dumpErr(`Invalid value type ${e}`))}readRefType(){const e=this.lexer.read_uint8();switch(e){case s.WASMRefType.funcref:case s.WASMRefType.externref:return e}throw new TypeError(this.dumpErr(`Invalid ref type ${e}`))}readLimit(){const e=this.lexer,t=new a.WASMLimit,o=e.read_uint8();if(t.hasMax=0!==o,o){if(t.min=e.read_uint32(),t.max=e.read_uint32(),t.min>t.max)throw new RangeError(this.dumpErr(`Limit min ${t.min} greater than max ${t.max}`))}else t.min=t.max=e.read_uint32();return t}parse(e){const t=this.lexer;for(t.read_float64();t.has();){const o=t.read_uint8();if(this.currErrStr=`Error while parsing section ${o}: `,o>12)throw new n.CompileError(this.dumpErr(`Trying to parse invalid section ${o}`));if(0!==o&&e.has_section(o))throw new n.CompileError(this.dumpErr(`Section ${o} already exists`));e.sectionLengths[o]=t.read_uint32();const i=t.at;switch(o){case 0:this.parseSection0(e);break;case 1:this.parseSection1(e);break;case 2:this.parseSection2(e);break;case 3:this.parseSection3(e);break;case 4:this.parseSection4(e);break;case 5:this.parseSection5(e);break;case 6:this.parseSection6(e);break;case 7:this.parseSection7(e);break;case 8:this.parseSection8(e);break;case 9:this.parseSection9(e);break;case 10:this.parseSection10(e);break;case 11:this.parseSection11(e);break;case 12:this.parseSection12(e)}if(t.at!==i+e.sectionLengths[o])throw new RangeError(this.dumpErr(`Section ${o} has malformed length ${e.sectionLengths[o]}`))}if(t.at!==t.buf.length)throw new n.CompileError(this.dumpErr("Prematurely finished parsing the binary"))}parseSection0(e){this.lexer.at+=e.sectionLengths[0]}parseSection1(e){const t=this.lexer,o=t.read_uint32();for(let i=0;i<o;++i){this.currErrStr=`Error while parsing (sec 1, functype ${i}): `;const o=new a.WASMFuncType,r=t.read_uint8();if(96!==r)throw new n.CompileError(this.dumpErr(`Expected 0x60 for functype, got ${r}`));const _=t.read_uint32();for(let e=0;e<_;++e)o.args.push(this.readValueType());const s=t.read_uint32();for(let e=0;e<s;++e)o.rets.push(this.readValueType());e.section1.content.push(o)}}parseSection2(e){if(e.has_section(3))throw new n.CompileError(this.dumpErr("Function section declared before import section"));if(e.has_section(4))throw new n.CompileError(this.dumpErr("Table section declared before import section"));if(e.has_section(5))throw new n.CompileError(this.dumpErr("Memory section declared before import section"));if(e.has_section(6))throw new n.CompileError(this.dumpErr("Global section declared before import section"));const t=this.lexer,o=t.read_uint32();for(let i=0;i<o;++i){this.currErrStr=`Error while parsing (sec 2, import ${i}): `;const o=new a.WASMSection2Content;o.module=t.read_string(),o.name=t.read_string();const r=o.kind=t.read_uint8();switch(r){case s.WASMDeclType.func:if(o.index=t.read_uint32(),e.funcTypes.push(o.index),o.index>=e.section1.content.length)throw new RangeError(this.dumpErr(`Functype index ${o.index} out of range`));++e.importFunc;break;case s.WASMDeclType.global:{const i=new s.WASMGlobalType;i.type=this.readValueType(),i.mutable=0!==t.read_uint8(),o.type=i.type,e.globalTypes.push(i),++e.importGlobal;break}case s.WASMDeclType.table:o.type=t.read_uint8(),o.limits=this.readLimit(),++e.tableCount;break;case s.WASMDeclType.mem:o.limits=this.readLimit(),++e.memoryCount;break;default:throw new n.CompileError(this.dumpErr(`Invalid import type ${r}`))}e.section2.content.push(o)}}parseSection3(e){if(!e.has_section(1))throw new n.CompileError(this.dumpErr("Missing functype section"));const t=this.lexer,o=t.read_uint32();for(let i=0;i<o;++i){this.currErrStr=`Error while parsing (sec 3, function ${i}): `;const o=new a.WASMSection3Content;if(o.index=t.read_uint32(),o.index>=e.section1.content.length)throw new RangeError(this.dumpErr(`Functype index ${o.index} out of range`));e.funcTypes.push(o.index),e.section3.content.push(o)}}parseSection4(e){const t=this.lexer.read_uint32();for(let o=0;o<t;++o){this.currErrStr=`Error while parsing (sec 4, table ${o}): `;const t=new a.WASMSection4Content,i=this.readRefType();t.refKind=i,t.limit=this.readLimit(),e.section4.content.push(t)}e.tableCount+=t}parseSection5(e){const t=this.lexer.read_uint32();if(t+e.memoryCount>1)throw new n.CompileError(this.dumpErr(`Attempted to declare ${t+e.memoryCount} > 1 memory section`));for(let o=0;o<t;++o){this.currErrStr=`Error while parsing (sec 5, memory ${o}): `;const t=this.readLimit();e.section5.content.push(t)}e.memoryCount+=t}parseSection6(e){const t=this.lexer,o=t.read_uint32();for(let i=0;i<o;++i){this.currErrStr=`Error while parsing (sec 6, global ${i+e.importGlobal}): `;const o=new a.WASMSection6Content,r=t.read_uint8();o.type.mutable=0!==t.read_uint8(),o.type.type=r,e.globalTypes.push(o.type),o.expr=this.parseConstExpr(),e.section6.content.push(o)}}parseSection7(e){const t=this.lexer,o=t.read_uint32();for(let i=0;i<o;++i){this.currErrStr=`Error while parsing (sec 7, export ${i}): `;const o=new a.WASMSection7Content;o.name=t.read_string();const r=o.kind=t.read_uint8(),_=o.index=t.read_uint32();switch(r){case 0:if(!e.has_section(3))throw new n.CompileError(this.dumpErr("Function section missing for exports"));if(_>=e.funcTypes.length)throw new RangeError(this.dumpErr(`Exported function ${_} out of range`));break;case 1:if(!e.has_section(4))throw new n.CompileError(this.dumpErr("Table section missing for exports"));if(_>=e.tableCount)throw new RangeError(this.dumpErr(`Exported table ${_} out of range`));break;case 2:if(!e.has_section(5))throw new n.CompileError(this.dumpErr("Memory section missing for exports"));if(_>=e.memoryCount)throw new RangeError(this.dumpErr(`Exported memory ${_} out of range`));break;case 3:if(!e.has_section(6))throw new n.CompileError(this.dumpErr("Global section missing for exports"));if(_>=e.globalTypes.length)throw new RangeError(this.dumpErr(`Exported global ${_} out of range`));break;default:throw new n.CompileError(this.dumpErr(`Invalid export type ${r}`))}e.section7.content.push(o)}}parseSection8(e){if(!e.has_section(3))throw new n.CompileError(this.dumpErr("Missing func declaration section"));const t=this.lexer;if(e.section8.index=t.read_uint32(),e.section8.index<e.importFunc)throw new RangeError(this.dumpErr(`Start index $func${e.section8.index} is an import`));if(e.section8.index-e.importFunc>=e.section3.content.length)throw new RangeError(this.dumpErr(`Start index $func${e.section8.index} out of range`));const o=e.section1.content[e.funcTypes[e.section8.index]];if(0!==o.args.length||0!==o.rets.length)throw new TypeError(this.dumpErr(`Expected start function type to be [] -> [], got [${(0,s.typeArrayToString)(o.args)}] -> [${(0,s.typeArrayToString)(o.rets)}]`))}parseSection9(e){const t=this.lexer,o=t.read_uint32();for(let i=0;i<o;++i){this.currErrStr=`Error while parsing (sec 9, elem ${i}): `;const o=new a.WASMSection9Content;o.kind=t.read_uint32(),o.offset=this.parseConstExpr();const r=t.read_uint32();for(let e=0;e<r;++e)o.funcrefs.push(t.read_uint32());e.section9.content.push(o)}}parseSection10(e){if(!e.has_section(3))throw new n.CompileError(this.dumpErr("Missing func declaration section"));const t=this.lexer,o=t.read_uint32();if(o!==e.section3.content.length)throw new RangeError(this.dumpErr(`Function count mismatch: declared ${e.section3.content.length}, initializing ${o}`));for(let i=0;i<o;++i){this.currErrStr=`Error while parsing (sec 10, $func${i+e.importFunc}): `;const o=new a.WASMSection10Content;o.byteLen=t.read_uint32();const r=t.read_uint32(),n=[],_=e.section1.content[e.section3.content[i].index];for(let e=0;e<_.args.length;++e)n.push(_.args[e]);for(let e=0;e<r;++e){const e=t.read_uint32(),i=this.readValueType(),r=new a.WASMLocalEnum;r.count=e,r.type=i,o.locals.push(r);for(let t=0;t<e;++t)n.push(i)}o.code=this.parseCodeBlock(n,[],[],_.rets,_.rets,e),e.section10.content.push(o)}}parseSection11(e){const t=this.lexer,o=t.read_uint32();if(e.has_section(12)&&e.section12.dataCount!==o)throw new RangeError(this.dumpErr(`Data count mismatch: declared ${e.section12.dataCount}, initializing ${o}`));for(let i=0;i<o;++i){this.currErrStr=`Error while parsing (sec 11, data ${i}): `;const o=new a.WASMSection11Content,r=t.read_uint8();switch(o.kind=r,r){case 2:o.memidx=t.read_uint32();case 0:o.offset=this.parseConstExpr();case 1:break;default:throw new n.CompileError(this.dumpErr(`Invalid data flag ${r}`))}const _=t.read_uint32();o.data=this.bin.slice(t.at,t.at+=_),e.section11.content.push(o)}}parseSection12(e){const t=this.lexer;e.section12.dataCount=t.read_uint32()}createResultType(e,t){if(!(e<0)){if(e>=t.section1.content.length)throw new RangeError(`Functype ${e} out of range`);return t.section1.content[e]}switch(e+128){case s.WASMValueType.i32:case s.WASMValueType.i64:case s.WASMValueType.f32:case s.WASMValueType.f64:return new _.WASMOPDef([],[e+128]);case s.WASMValueType.nil:return new _.WASMOPDef([],[]);default:throw new TypeError(`Invalid type ${e}`)}}parseCodeBlock(e,t,o,i,a,u){const c=e.length,l=u.globalTypes.length,f=u.funcTypes.length,S=this.lexer,d=[];for(;;){let i=S.read_instr();if(i===_.WASMOPCode.op_end||i===_.WASMOPCode.op_else)break;const M=new r.InstrNode;switch(d.push(M),M.instr=i,i){case _.WASMOPCode.op_if:(0,p.typeCheckArgs)(t,[s.WASMValueType.i32]);case _.WASMOPCode.op_loop:case _.WASMOPCode.op_block:{const n=S.read_int32(),c=this.createResultType(n,u);if((0,p.typeCheckArgs)(t,c.args),i===_.WASMOPCode.op_loop?o.push(c.args):o.push(c.rets),M.immediates.push(r.WASMValue.createU32Literal(n)),M.child=this.parseCodeBlock(e,c.args.slice(0),o,c.rets,a,u),S.back(),S.read_uint8()===_.WASMOPCode.op_else)M.hasElse=!0,M.child2=this.parseCodeBlock(e,c.args.slice(0),o,c.rets,a,u);else if(i===_.WASMOPCode.op_if&&!(0,p.typeArrayEq)(c.args,c.rets))throw new TypeError(this.dumpErr(`if true clause returns [${(0,s.typeArrayToString)(c.rets)}], if false returns [${(0,s.typeArrayToString)(c.args)}]`));for(const e of c.rets)(0,p.typeStackPush)(t,e);M.numKeep=c.rets.length,M.numDrop=c.args.length,o.pop();break}case _.WASMOPCode.op_call:{const e=S.read_uint32();if(M.immediates.push(r.WASMValue.createU32Literal(e)),e>=f)throw new RangeError(this.dumpErr(`Function index ${e} out of range`));const o=u.section1.content[u.funcTypes[e]];(0,p.typeCheckArgs)(t,o.args);for(const e of o.rets)(0,p.typeStackPush)(t,e);break}case _.WASMOPCode.op_call_indirect:{const e=S.read_uint32();M.immediates.push(r.WASMValue.createU32Literal(e)),0!==S.read_uint32()&&console.error("Warning: call_indirect typeuse not supported and is ignored"),(0,p.typeCheckArgs)(t,[s.WASMValueType.i32]);const o=u.section1.content[e];(0,p.typeCheckArgs)(t,o.args);for(const e of o.rets)(0,p.typeStackPush)(t,e);break}case _.WASMOPCode.op_br_table:{(0,p.typeCheckArgs)(t,[s.WASMValueType.i32]);const e=S.read_uint32();M.immediates.push(r.WASMValue.createU32Literal(e));const i=S.read_uint32();if(M.immediates.push(r.WASMValue.createU32Literal(i)),i>=o.length)throw new RangeError(this.dumpErr(`Branch depth ${i} invalid`));const n=o[o.length-1-i];for(let t=0;t<e;++t){const e=S.read_uint32();if(M.immediates.push(r.WASMValue.createU32Literal(e)),e>=o.length)throw new RangeError(this.dumpErr(`Branch depth ${e} invalid`));if(!(0,p.typeArrayEq)(n,o[o.length-1-e]))throw new TypeError(this.dumpErr("br_table block type mismatch"))}M.numKeep=n.length,(0,p.typeCheckArgs)(t,n),t.push(s.WASMValueType.nil);break}case _.WASMOPCode.op_memory_copy:M.immediates.push(r.WASMValue.createU32Literal(S.read_uint32()));case _.WASMOPCode.op_memory_fill:case _.WASMOPCode.op_memory_size:case _.WASMOPCode.op_memory_grow:M.immediates.push(r.WASMValue.createU32Literal(S.read_uint32())),(0,p.typeCheckDef)(t,i);break;case _.WASMOPCode.op_i32_load8_s:case _.WASMOPCode.op_i32_load8_u:case _.WASMOPCode.op_i64_load8_s:case _.WASMOPCode.op_i64_load8_u:case _.WASMOPCode.op_i32_store8:case _.WASMOPCode.op_i32_store16:case _.WASMOPCode.op_i64_store8:case _.WASMOPCode.op_i32_load16_s:case _.WASMOPCode.op_i32_load16_u:case _.WASMOPCode.op_i64_load16_s:case _.WASMOPCode.op_i64_load16_u:case _.WASMOPCode.op_i64_store16:case _.WASMOPCode.op_i32_load:case _.WASMOPCode.op_i64_load32_s:case _.WASMOPCode.op_i64_load32_u:case _.WASMOPCode.op_f32_load:case _.WASMOPCode.op_i32_store:case _.WASMOPCode.op_i64_store32:case _.WASMOPCode.op_f32_store:case _.WASMOPCode.op_i64_load:case _.WASMOPCode.op_f64_load:case _.WASMOPCode.op_i64_store:case _.WASMOPCode.op_f64_store:{(0,p.typeCheckDef)(t,i);const e=S.read_uint32();M.immediates.push(r.WASMValue.createU32Literal(e)),M.immediates.push(r.WASMValue.createU32Literal(S.read_uint32()));break}case _.WASMOPCode.op_i32_const:(0,p.typeStackPush)(t,s.WASMValueType.i32),M.immediates.push(r.WASMValue.createI32Literal(S.read_int32()));break;case _.WASMOPCode.op_i64_const:(0,p.typeStackPush)(t,s.WASMValueType.i64),M.immediates.push(r.WASMValue.createI64Literal(S.read_int64()));break;case _.WASMOPCode.op_f32_const:(0,p.typeStackPush)(t,s.WASMValueType.f32),M.immediates.push(r.WASMValue.createF32Literal(S.read_float32()));break;case _.WASMOPCode.op_f64_const:(0,p.typeStackPush)(t,s.WASMValueType.f64),M.immediates.push(r.WASMValue.createF64Literal(S.read_float64()));break;case _.WASMOPCode.op_br_if:(0,p.typeCheckArgs)(t,[s.WASMValueType.i32]);case _.WASMOPCode.op_br:{const e=S.read_uint32();if(e>=o.length)throw new RangeError(this.dumpErr(`Invalid branch depth ${e}`));const i=o[o.length-1-e];(0,p.typeCheckArgs)(t,i),M.immediates.push(r.WASMValue.createU32Literal(e)),M.numKeep=i.length;for(const e of i)(0,p.typeStackPush)(t,e);M.instr===_.WASMOPCode.op_br&&t.push(s.WASMValueType.nil);break}case _.WASMOPCode.op_local_get:{const o=S.read_uint32();if(o>=c)throw new RangeError(this.dumpErr(`Local index ${o} out of range`));(0,p.typeStackPush)(t,e[o]),M.immediates.push(r.WASMValue.createU32Literal(o));break}case _.WASMOPCode.op_local_set:{const o=S.read_uint32();if(o>=c)throw new RangeError(this.dumpErr(`Local index ${o} out of range`));(0,p.typeCheckArgs)(t,[e[o]]),M.immediates.push(r.WASMValue.createU32Literal(o));break}case _.WASMOPCode.op_local_tee:{const o=S.read_uint32();if(o>=c)throw new RangeError(this.dumpErr(`Local index ${o} out of range`));(0,p.typeCheckArgs)(t,[e[o]]),(0,p.typeStackPush)(t,e[o]),M.immediates.push(r.WASMValue.createU32Literal(o));break}case _.WASMOPCode.op_global_get:{const e=S.read_uint32();if(e>=l)throw new RangeError(this.dumpErr(`Global index ${e} out of range`));(0,p.typeStackPush)(t,u.globalTypes[e].type),M.immediates.push(r.WASMValue.createU32Literal(e));break}case _.WASMOPCode.op_global_set:{const e=S.read_uint32();if(e>=l)throw new RangeError(this.dumpErr(`Global index ${e} out of range`));(0,p.typeCheckArgs)(t,[u.globalTypes[e].type]),M.immediates.push(r.WASMValue.createU32Literal(e));break}case _.WASMOPCode.op_drop:if(0===t.length)throw new RangeError(this.dumpErr("Expected at least 1 value on stack for drop, got 0"));t.pop();break;case _.WASMOPCode.op_unreachable:t.push(s.WASMValueType.nil);break;case _.WASMOPCode.op_return:(0,p.typeCheckResults)(t,a),M.immediates.push(r.WASMValue.createU32Literal(o.length)),M.numKeep=a.length,t.push(s.WASMValueType.nil);break;case _.WASMOPCode.op_select:{if((0,p.typeCheckArgs)(t,[s.WASMValueType.i32]),t.length<2)throw new RangeError(this.dumpErr(`Expected at least 2 values on stack for select, got ${t.length}`));const e=t.pop(),o=t.pop();if(void 0===e||void 0===o)throw new n.CompileError(this.dumpErr("assert(true)"));if(e!==o)throw new RangeError(this.dumpErr(`Select operands ${(0,s.typeToString)(e)} and ${(0,s.typeToString)(o)} do not match`));(0,p.typeStackPush)(t,e);break}default:if(!(i in _.WASMOPDefs))throw new n.CompileError(this.dumpErr(`Invalid opcode ${i}`));(0,p.typeCheckDef)(t,i)}}return(0,p.typeCheckResults)(t,i),d}parseConstExpr(){const e=this.lexer,t=[];for(;;){const o=e.read_instr();if(o===_.WASMOPCode.op_end)break;const i=new r.InstrNode;switch(t.push(i),i.instr=o,o){case _.WASMOPCode.op_i32_const:i.immediates.push(r.WASMValue.createI32Literal(e.read_int32()));break;case _.WASMOPCode.op_i64_const:i.immediates.push(r.WASMValue.createI64Literal(e.read_int64()));break;case _.WASMOPCode.op_f32_const:i.immediates.push(r.WASMValue.createF32Literal(e.read_float32()));break;case _.WASMOPCode.op_f64_const:i.immediates.push(r.WASMValue.createF64Literal(e.read_float64()));break;case _.WASMOPCode.op_global_get:throw new n.CompileError(this.dumpErr("Globals in constexpr not yet supported"));default:throw new n.CompileError(this.dumpErr(`Opcode ${o} not allowed in constexpr`))}}if(1!==t.length)throw new n.CompileError(this.dumpErr("Constexprs must contain exactly one instruction"));return t}}},316:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){if(this.init=0,this.max=0,"object"!=typeof e)throw new Error("Table options must be an object");if("number"==typeof e.maximum?this.max=e.maximum:this.max=8388608,"number"==typeof e.initial&&(this.init=e.initial),this.max<this.init)throw new Error("Table max must be no less than table init");this.max=Math.max(this.max,this.init),this.elements=new Array(this.init).fill(0),this.__funcRefs=new Array(this.init)}get length(){return this.elements.length}get(e){if("function"!=typeof this.__funcRefs[e])throw new RangeError(`Function at index ${e} not initialized`);if(e>=this.init)throw new RangeError("Table index out of bounds");return this.__funcRefs[e]}set(e,t){if(e>=this.init)throw new Error("Table index out of bounds");this.elements[e]=t}grow(e){e+this.init>this.max?this.init=this.max:this.init+=e;for(let t=0;t<e;++t)this.elements.push(0)}}},317:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InstrNode=t.WASMValue=void 0;const i=o(438),r=o(451);class n{constructor(){this.type=r.WASMValueType.nil,this.__value=0,this.__bigval=BigInt(0)}set(e){if(this.type!==e.type&&this.type!==r.WASMValueType.nil&&e.type!==r.WASMValueType.nil)throw new TypeError(`Internal type mismatch: expected ${(0,r.typeToString)(this.type)}, got ${(0,r.typeToString)(e.type)}`);this.__value=e.__value,this.__bigval=e.__bigval}get u32(){return this.__value}get i32(){return this.__value}get f32(){return this.__value}get i64(){return this.__bigval}get f64(){return this.__value}set u32(e){this.__value=e>>>0}set i32(e){this.__value=0|e}set f32(e){this.__value=Math.fround(e)}set i64(e){this.__bigval=e}set f64(e){this.__value=e}get numeric(){return this.type===r.WASMValueType.i64?this.__bigval:this.__value}static createU32Literal(e){const t=new n;return t.type=r.WASMValueType.u32,t.__value=e>>>0,t}static createI32Literal(e){const t=new n;return t.type=r.WASMValueType.i32,t.__value=0|e,t}static createF32Literal(e){const t=new n;return t.type=r.WASMValueType.f32,t.__value=Math.fround(e),t}static createI64Literal(e){const t=new n;return t.type=r.WASMValueType.i64,t.__bigval=BigInt.asIntN(64,e),t}static createF64Literal(e){const t=new n;return t.type=r.WASMValueType.f64,t.__value=e,t}}t.WASMValue=n,t.InstrNode=class{constructor(){this.instr=i.WASMOPCode.op_nop,this.hasElse=!1,this.numKeep=0,this.numDrop=0,this.returnType=r.WASMValueType.nil,this.immediates=[],this.child=[],this.child2=[]}}},377:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WASMExternalGlobal=void 0;const i=o(317),r=o(451);t.WASMExternalGlobal=class{constructor(e){if(this._value=new i.WASMValue,this.mutable=!1,"boolean"==typeof e.mutable&&(this.mutable=e.mutable),"string"==typeof e.value)switch(e.value){case"i32":this._value=i.WASMValue.createI32Literal(0);break;case"f32":this._value=i.WASMValue.createF32Literal(0);break;case"i64":this._value=i.WASMValue.createI64Literal(BigInt(0));break;case"f64":this._value=i.WASMValue.createF64Literal(0)}}get type(){switch(this._value.type){case r.WASMValueType.i32:return"i32";case r.WASMValueType.f32:return"f32";case r.WASMValueType.i64:return"i64";case r.WASMValueType.f64:return"f64"}return"nil"}get value(){return this._value.numeric}}},438:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WASMOPDefs=t.WASMOPDef=t.WASMOPCode=void 0;const i=o(451);var r;!function(e){e[e.op_unreachable=0]="op_unreachable",e[e.op_nop=1]="op_nop",e[e.op_block=2]="op_block",e[e.op_loop=3]="op_loop",e[e.op_if=4]="op_if",e[e.op_else=5]="op_else",e[e.op_end=11]="op_end",e[e.op_br=12]="op_br",e[e.op_br_if=13]="op_br_if",e[e.op_br_table=14]="op_br_table",e[e.op_return=15]="op_return",e[e.op_call=16]="op_call",e[e.op_call_indirect=17]="op_call_indirect",e[e.op_drop=26]="op_drop",e[e.op_select=27]="op_select",e[e.op_local_get=32]="op_local_get",e[e.op_local_set=33]="op_local_set",e[e.op_local_tee=34]="op_local_tee",e[e.op_global_get=35]="op_global_get",e[e.op_global_set=36]="op_global_set",e[e.op_i32_load=40]="op_i32_load",e[e.op_i64_load=41]="op_i64_load",e[e.op_f32_load=42]="op_f32_load",e[e.op_f64_load=43]="op_f64_load",e[e.op_i32_load8_s=44]="op_i32_load8_s",e[e.op_i32_load8_u=45]="op_i32_load8_u",e[e.op_i32_load16_s=46]="op_i32_load16_s",e[e.op_i32_load16_u=47]="op_i32_load16_u",e[e.op_i64_load8_s=48]="op_i64_load8_s",e[e.op_i64_load8_u=49]="op_i64_load8_u",e[e.op_i64_load16_s=50]="op_i64_load16_s",e[e.op_i64_load16_u=51]="op_i64_load16_u",e[e.op_i64_load32_s=52]="op_i64_load32_s",e[e.op_i64_load32_u=53]="op_i64_load32_u",e[e.op_i32_store=54]="op_i32_store",e[e.op_i64_store=55]="op_i64_store",e[e.op_f32_store=56]="op_f32_store",e[e.op_f64_store=57]="op_f64_store",e[e.op_i32_store8=58]="op_i32_store8",e[e.op_i32_store16=59]="op_i32_store16",e[e.op_i64_store8=60]="op_i64_store8",e[e.op_i64_store16=61]="op_i64_store16",e[e.op_i64_store32=62]="op_i64_store32",e[e.op_memory_size=63]="op_memory_size",e[e.op_memory_grow=64]="op_memory_grow",e[e.op_i32_const=65]="op_i32_const",e[e.op_i64_const=66]="op_i64_const",e[e.op_f32_const=67]="op_f32_const",e[e.op_f64_const=68]="op_f64_const",e[e.op_i32_eqz=69]="op_i32_eqz",e[e.op_i32_eq=70]="op_i32_eq",e[e.op_i32_ne=71]="op_i32_ne",e[e.op_i32_lt_s=72]="op_i32_lt_s",e[e.op_i32_lt_u=73]="op_i32_lt_u",e[e.op_i32_gt_s=74]="op_i32_gt_s",e[e.op_i32_gt_u=75]="op_i32_gt_u",e[e.op_i32_le_s=76]="op_i32_le_s",e[e.op_i32_le_u=77]="op_i32_le_u",e[e.op_i32_ge_s=78]="op_i32_ge_s",e[e.op_i32_ge_u=79]="op_i32_ge_u",e[e.op_i64_eqz=80]="op_i64_eqz",e[e.op_i64_eq=81]="op_i64_eq",e[e.op_i64_ne=82]="op_i64_ne",e[e.op_i64_lt_s=83]="op_i64_lt_s",e[e.op_i64_lt_u=84]="op_i64_lt_u",e[e.op_i64_gt_s=85]="op_i64_gt_s",e[e.op_i64_gt_u=86]="op_i64_gt_u",e[e.op_i64_le_s=87]="op_i64_le_s",e[e.op_i64_le_u=88]="op_i64_le_u",e[e.op_i64_ge_s=89]="op_i64_ge_s",e[e.op_i64_ge_u=90]="op_i64_ge_u",e[e.op_f32_eq=91]="op_f32_eq",e[e.op_f32_ne=92]="op_f32_ne",e[e.op_f32_lt=93]="op_f32_lt",e[e.op_f32_gt=94]="op_f32_gt",e[e.op_f32_le=95]="op_f32_le",e[e.op_f32_ge=96]="op_f32_ge",e[e.op_f64_eq=97]="op_f64_eq",e[e.op_f64_ne=98]="op_f64_ne",e[e.op_f64_lt=99]="op_f64_lt",e[e.op_f64_gt=100]="op_f64_gt",e[e.op_f64_le=101]="op_f64_le",e[e.op_f64_ge=102]="op_f64_ge",e[e.op_i32_clz=103]="op_i32_clz",e[e.op_i32_ctz=104]="op_i32_ctz",e[e.op_i32_popcnt=105]="op_i32_popcnt",e[e.op_i32_add=106]="op_i32_add",e[e.op_i32_sub=107]="op_i32_sub",e[e.op_i32_mul=108]="op_i32_mul",e[e.op_i32_div_s=109]="op_i32_div_s",e[e.op_i32_div_u=110]="op_i32_div_u",e[e.op_i32_rem_s=111]="op_i32_rem_s",e[e.op_i32_rem_u=112]="op_i32_rem_u",e[e.op_i32_and=113]="op_i32_and",e[e.op_i32_or=114]="op_i32_or",e[e.op_i32_xor=115]="op_i32_xor",e[e.op_i32_shl=116]="op_i32_shl",e[e.op_i32_shr_s=117]="op_i32_shr_s",e[e.op_i32_shr_u=118]="op_i32_shr_u",e[e.op_i32_rotl=119]="op_i32_rotl",e[e.op_i32_rotr=120]="op_i32_rotr",e[e.op_i64_clz=121]="op_i64_clz",e[e.op_i64_ctz=122]="op_i64_ctz",e[e.op_i64_popcnt=123]="op_i64_popcnt",e[e.op_i64_add=124]="op_i64_add",e[e.op_i64_sub=125]="op_i64_sub",e[e.op_i64_mul=126]="op_i64_mul",e[e.op_i64_div_s=127]="op_i64_div_s",e[e.op_i64_div_u=128]="op_i64_div_u",e[e.op_i64_rem_s=129]="op_i64_rem_s",e[e.op_i64_rem_u=130]="op_i64_rem_u",e[e.op_i64_and=131]="op_i64_and",e[e.op_i64_or=132]="op_i64_or",e[e.op_i64_xor=133]="op_i64_xor",e[e.op_i64_shl=134]="op_i64_shl",e[e.op_i64_shr_s=135]="op_i64_shr_s",e[e.op_i64_shr_u=136]="op_i64_shr_u",e[e.op_i64_rotl=137]="op_i64_rotl",e[e.op_i64_rotr=138]="op_i64_rotr",e[e.op_f32_abs=139]="op_f32_abs",e[e.op_f32_neg=140]="op_f32_neg",e[e.op_f32_ceil=141]="op_f32_ceil",e[e.op_f32_floor=142]="op_f32_floor",e[e.op_f32_trunc=143]="op_f32_trunc",e[e.op_f32_nearest=144]="op_f32_nearest",e[e.op_f32_sqrt=145]="op_f32_sqrt",e[e.op_f32_add=146]="op_f32_add",e[e.op_f32_sub=147]="op_f32_sub",e[e.op_f32_mul=148]="op_f32_mul",e[e.op_f32_div=149]="op_f32_div",e[e.op_f32_min=150]="op_f32_min",e[e.op_f32_max=151]="op_f32_max",e[e.op_f32_copysign=152]="op_f32_copysign",e[e.op_f64_abs=153]="op_f64_abs",e[e.op_f64_neg=154]="op_f64_neg",e[e.op_f64_ceil=155]="op_f64_ceil",e[e.op_f64_floor=156]="op_f64_floor",e[e.op_f64_trunc=157]="op_f64_trunc",e[e.op_f64_nearest=158]="op_f64_nearest",e[e.op_f64_sqrt=159]="op_f64_sqrt",e[e.op_f64_add=160]="op_f64_add",e[e.op_f64_sub=161]="op_f64_sub",e[e.op_f64_mul=162]="op_f64_mul",e[e.op_f64_div=163]="op_f64_div",e[e.op_f64_min=164]="op_f64_min",e[e.op_f64_max=165]="op_f64_max",e[e.op_f64_copysign=166]="op_f64_copysign",e[e.op_i32_wrap_i64=167]="op_i32_wrap_i64",e[e.op_i32_trunc_f32_s=168]="op_i32_trunc_f32_s",e[e.op_i32_trunc_f32_u=169]="op_i32_trunc_f32_u",e[e.op_i32_trunc_f64_s=170]="op_i32_trunc_f64_s",e[e.op_i32_trunc_f64_u=171]="op_i32_trunc_f64_u",e[e.op_i64_extend_i32_s=172]="op_i64_extend_i32_s",e[e.op_i64_extend_i32_u=173]="op_i64_extend_i32_u",e[e.op_i64_trunc_f32_s=174]="op_i64_trunc_f32_s",e[e.op_i64_trunc_f32_u=175]="op_i64_trunc_f32_u",e[e.op_i64_trunc_f64_s=176]="op_i64_trunc_f64_s",e[e.op_i64_trunc_f64_u=177]="op_i64_trunc_f64_u",e[e.op_f32_convert_i32_s=178]="op_f32_convert_i32_s",e[e.op_f32_convert_i32_u=179]="op_f32_convert_i32_u",e[e.op_f32_convert_i64_s=180]="op_f32_convert_i64_s",e[e.op_f32_convert_i64_u=181]="op_f32_convert_i64_u",e[e.op_f32_demote_f64=182]="op_f32_demote_f64",e[e.op_f64_convert_i32_s=183]="op_f64_convert_i32_s",e[e.op_f64_convert_i32_u=184]="op_f64_convert_i32_u",e[e.op_f64_convert_i64_s=185]="op_f64_convert_i64_s",e[e.op_f64_convert_i64_u=186]="op_f64_convert_i64_u",e[e.op_f64_promote_f32=187]="op_f64_promote_f32",e[e.op_i32_reinterpret_f32=188]="op_i32_reinterpret_f32",e[e.op_i64_reinterpret_f64=189]="op_i64_reinterpret_f64",e[e.op_f32_reinterpret_i32=190]="op_f32_reinterpret_i32",e[e.op_f64_reinterpret_i64=191]="op_f64_reinterpret_i64",e[e.op_i32_extend8_s=192]="op_i32_extend8_s",e[e.op_i32_extend16_s=193]="op_i32_extend16_s",e[e.op_i64_extend8_s=194]="op_i64_extend8_s",e[e.op_i64_extend16_s=195]="op_i64_extend16_s",e[e.op_i64_extend32_s=196]="op_i64_extend32_s",e[e.op_i32_trunc_sat_f32_s=252]="op_i32_trunc_sat_f32_s",e[e.op_i32_trunc_sat_f32_u=508]="op_i32_trunc_sat_f32_u",e[e.op_i32_trunc_sat_f64_s=764]="op_i32_trunc_sat_f64_s",e[e.op_i32_trunc_sat_f64_u=1020]="op_i32_trunc_sat_f64_u",e[e.op_i64_trunc_sat_f32_s=1276]="op_i64_trunc_sat_f32_s",e[e.op_i64_trunc_sat_f32_u=1532]="op_i64_trunc_sat_f32_u",e[e.op_i64_trunc_sat_f64_s=1788]="op_i64_trunc_sat_f64_s",e[e.op_i64_trunc_sat_f64_u=2044]="op_i64_trunc_sat_f64_u",e[e.op_memory_copy=2812]="op_memory_copy",e[e.op_memory_fill=3068]="op_memory_fill"}(r||(t.WASMOPCode=r={}));class n{constructor(e=[],t=[]){this.args=e,this.rets=t}}t.WASMOPDef=n,t.WASMOPDefs={[r.op_unreachable]:new n([],[]),[r.op_nop]:new n([],[]),[r.op_block]:new n([],[]),[r.op_loop]:new n([],[]),[r.op_if]:new n([],[]),[r.op_else]:new n([],[]),[r.op_end]:new n([],[]),[r.op_br]:new n([],[]),[r.op_br_if]:new n([i.WASMValueType.i32],[]),[r.op_br_table]:new n([i.WASMValueType.i32],[]),[r.op_return]:new n([],[]),[r.op_call]:new n([],[]),[r.op_call_indirect]:new n([],[]),[r.op_drop]:new n([],[]),[r.op_select]:new n([],[]),[r.op_local_get]:new n([],[]),[r.op_local_set]:new n([],[]),[r.op_local_tee]:new n([],[]),[r.op_global_get]:new n([],[]),[r.op_global_set]:new n([],[]),[r.op_i32_load]:new n([i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i64_load]:new n([i.WASMValueType.i32],[i.WASMValueType.i64]),[r.op_f32_load]:new n([i.WASMValueType.i32],[i.WASMValueType.f32]),[r.op_f64_load]:new n([i.WASMValueType.i32],[i.WASMValueType.f64]),[r.op_i32_load8_s]:new n([i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_load8_u]:new n([i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_load16_s]:new n([i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_load16_u]:new n([i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i64_load8_s]:new n([i.WASMValueType.i32],[i.WASMValueType.i64]),[r.op_i64_load8_u]:new n([i.WASMValueType.i32],[i.WASMValueType.i64]),[r.op_i64_load16_s]:new n([i.WASMValueType.i32],[i.WASMValueType.i64]),[r.op_i64_load16_u]:new n([i.WASMValueType.i32],[i.WASMValueType.i64]),[r.op_i64_load32_s]:new n([i.WASMValueType.i32],[i.WASMValueType.i64]),[r.op_i64_load32_u]:new n([i.WASMValueType.i32],[i.WASMValueType.i64]),[r.op_i32_store]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[]),[r.op_i64_store]:new n([i.WASMValueType.i32,i.WASMValueType.i64],[]),[r.op_f32_store]:new n([i.WASMValueType.i32,i.WASMValueType.f32],[]),[r.op_f64_store]:new n([i.WASMValueType.i32,i.WASMValueType.f64],[]),[r.op_i32_store8]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[]),[r.op_i32_store16]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[]),[r.op_i64_store8]:new n([i.WASMValueType.i32,i.WASMValueType.i64],[]),[r.op_i64_store16]:new n([i.WASMValueType.i32,i.WASMValueType.i64],[]),[r.op_i64_store32]:new n([i.WASMValueType.i32,i.WASMValueType.i64],[]),[r.op_memory_size]:new n([],[i.WASMValueType.i32]),[r.op_memory_grow]:new n([],[i.WASMValueType.i32]),[r.op_i32_const]:new n([],[i.WASMValueType.i32]),[r.op_i64_const]:new n([],[i.WASMValueType.i64]),[r.op_f32_const]:new n([],[i.WASMValueType.f32]),[r.op_f64_const]:new n([],[i.WASMValueType.f64]),[r.op_i32_eqz]:new n([i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_eq]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_ne]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_lt_s]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_lt_u]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_gt_s]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_gt_u]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_le_s]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_le_u]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_ge_s]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_ge_u]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i64_eqz]:new n([i.WASMValueType.i64],[i.WASMValueType.i32]),[r.op_i64_eq]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i32]),[r.op_i64_ne]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i32]),[r.op_i64_lt_s]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i32]),[r.op_i64_lt_u]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i32]),[r.op_i64_gt_s]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i32]),[r.op_i64_gt_u]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i32]),[r.op_i64_le_s]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i32]),[r.op_i64_le_u]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i32]),[r.op_i64_ge_s]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i32]),[r.op_i64_ge_u]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i32]),[r.op_f32_eq]:new n([i.WASMValueType.f32,i.WASMValueType.f32],[i.WASMValueType.i32]),[r.op_f32_ne]:new n([i.WASMValueType.f32,i.WASMValueType.f32],[i.WASMValueType.i32]),[r.op_f32_lt]:new n([i.WASMValueType.f32,i.WASMValueType.f32],[i.WASMValueType.i32]),[r.op_f32_gt]:new n([i.WASMValueType.f32,i.WASMValueType.f32],[i.WASMValueType.i32]),[r.op_f32_le]:new n([i.WASMValueType.f32,i.WASMValueType.f32],[i.WASMValueType.i32]),[r.op_f32_ge]:new n([i.WASMValueType.f32,i.WASMValueType.f32],[i.WASMValueType.i32]),[r.op_f64_eq]:new n([i.WASMValueType.f64,i.WASMValueType.f64],[i.WASMValueType.i32]),[r.op_f64_ne]:new n([i.WASMValueType.f64,i.WASMValueType.f64],[i.WASMValueType.i32]),[r.op_f64_lt]:new n([i.WASMValueType.f64,i.WASMValueType.f64],[i.WASMValueType.i32]),[r.op_f64_gt]:new n([i.WASMValueType.f64,i.WASMValueType.f64],[i.WASMValueType.i32]),[r.op_f64_le]:new n([i.WASMValueType.f64,i.WASMValueType.f64],[i.WASMValueType.i32]),[r.op_f64_ge]:new n([i.WASMValueType.f64,i.WASMValueType.f64],[i.WASMValueType.i32]),[r.op_i32_clz]:new n([i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_ctz]:new n([i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_popcnt]:new n([i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_add]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_sub]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_mul]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_div_s]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_div_u]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_rem_s]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_rem_u]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_and]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_or]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_xor]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_shl]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_shr_s]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_shr_u]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_rotl]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_rotr]:new n([i.WASMValueType.i32,i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i64_clz]:new n([i.WASMValueType.i64],[i.WASMValueType.i64]),[r.op_i64_ctz]:new n([i.WASMValueType.i64],[i.WASMValueType.i64]),[r.op_i64_popcnt]:new n([i.WASMValueType.i64],[i.WASMValueType.i64]),[r.op_i64_add]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i64]),[r.op_i64_sub]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i64]),[r.op_i64_mul]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i64]),[r.op_i64_div_s]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i64]),[r.op_i64_div_u]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i64]),[r.op_i64_rem_s]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i64]),[r.op_i64_rem_u]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i64]),[r.op_i64_and]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i64]),[r.op_i64_or]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i64]),[r.op_i64_xor]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i64]),[r.op_i64_shl]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i64]),[r.op_i64_shr_s]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i64]),[r.op_i64_shr_u]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i64]),[r.op_i64_rotl]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i64]),[r.op_i64_rotr]:new n([i.WASMValueType.i64,i.WASMValueType.i64],[i.WASMValueType.i64]),[r.op_f32_abs]:new n([i.WASMValueType.f32],[i.WASMValueType.f32]),[r.op_f32_neg]:new n([i.WASMValueType.f32],[i.WASMValueType.f32]),[r.op_f32_ceil]:new n([i.WASMValueType.f32],[i.WASMValueType.f32]),[r.op_f32_floor]:new n([i.WASMValueType.f32],[i.WASMValueType.f32]),[r.op_f32_trunc]:new n([i.WASMValueType.f32],[i.WASMValueType.f32]),[r.op_f32_nearest]:new n([i.WASMValueType.f32],[i.WASMValueType.f32]),[r.op_f32_sqrt]:new n([i.WASMValueType.f32],[i.WASMValueType.f32]),[r.op_f32_add]:new n([i.WASMValueType.f32,i.WASMValueType.f32],[i.WASMValueType.f32]),[r.op_f32_sub]:new n([i.WASMValueType.f32,i.WASMValueType.f32],[i.WASMValueType.f32]),[r.op_f32_mul]:new n([i.WASMValueType.f32,i.WASMValueType.f32],[i.WASMValueType.f32]),[r.op_f32_div]:new n([i.WASMValueType.f32,i.WASMValueType.f32],[i.WASMValueType.f32]),[r.op_f32_min]:new n([i.WASMValueType.f32,i.WASMValueType.f32],[i.WASMValueType.f32]),[r.op_f32_max]:new n([i.WASMValueType.f32,i.WASMValueType.f32],[i.WASMValueType.f32]),[r.op_f32_copysign]:new n([i.WASMValueType.f32,i.WASMValueType.f32],[i.WASMValueType.f32]),[r.op_f64_abs]:new n([i.WASMValueType.f64],[i.WASMValueType.f64]),[r.op_f64_neg]:new n([i.WASMValueType.f64],[i.WASMValueType.f64]),[r.op_f64_ceil]:new n([i.WASMValueType.f64],[i.WASMValueType.f64]),[r.op_f64_floor]:new n([i.WASMValueType.f64],[i.WASMValueType.f64]),[r.op_f64_trunc]:new n([i.WASMValueType.f64],[i.WASMValueType.f64]),[r.op_f64_nearest]:new n([i.WASMValueType.f64],[i.WASMValueType.f64]),[r.op_f64_sqrt]:new n([i.WASMValueType.f64],[i.WASMValueType.f64]),[r.op_f64_add]:new n([i.WASMValueType.f64,i.WASMValueType.f64],[i.WASMValueType.f64]),[r.op_f64_sub]:new n([i.WASMValueType.f64,i.WASMValueType.f64],[i.WASMValueType.f64]),[r.op_f64_mul]:new n([i.WASMValueType.f64,i.WASMValueType.f64],[i.WASMValueType.f64]),[r.op_f64_div]:new n([i.WASMValueType.f64,i.WASMValueType.f64],[i.WASMValueType.f64]),[r.op_f64_min]:new n([i.WASMValueType.f64,i.WASMValueType.f64],[i.WASMValueType.f64]),[r.op_f64_max]:new n([i.WASMValueType.f64,i.WASMValueType.f64],[i.WASMValueType.f64]),[r.op_f64_copysign]:new n([i.WASMValueType.f64,i.WASMValueType.f64],[i.WASMValueType.f64]),[r.op_i32_wrap_i64]:new n([i.WASMValueType.i64],[i.WASMValueType.i32]),[r.op_i32_trunc_f32_s]:new n([i.WASMValueType.f32],[i.WASMValueType.i32]),[r.op_i32_trunc_f32_u]:new n([i.WASMValueType.f32],[i.WASMValueType.i32]),[r.op_i32_trunc_f64_s]:new n([i.WASMValueType.f64],[i.WASMValueType.i32]),[r.op_i32_trunc_f64_u]:new n([i.WASMValueType.f64],[i.WASMValueType.i32]),[r.op_i64_extend_i32_s]:new n([i.WASMValueType.i32],[i.WASMValueType.i64]),[r.op_i64_extend_i32_u]:new n([i.WASMValueType.i32],[i.WASMValueType.i64]),[r.op_i64_trunc_f32_s]:new n([i.WASMValueType.f32],[i.WASMValueType.i64]),[r.op_i64_trunc_f32_u]:new n([i.WASMValueType.f32],[i.WASMValueType.i64]),[r.op_i64_trunc_f64_s]:new n([i.WASMValueType.f64],[i.WASMValueType.i64]),[r.op_i64_trunc_f64_u]:new n([i.WASMValueType.f64],[i.WASMValueType.i64]),[r.op_f32_convert_i32_s]:new n([i.WASMValueType.i32],[i.WASMValueType.f32]),[r.op_f32_convert_i32_u]:new n([i.WASMValueType.i32],[i.WASMValueType.f32]),[r.op_f32_convert_i64_s]:new n([i.WASMValueType.i64],[i.WASMValueType.f32]),[r.op_f32_convert_i64_u]:new n([i.WASMValueType.i64],[i.WASMValueType.f32]),[r.op_f32_demote_f64]:new n([i.WASMValueType.f64],[i.WASMValueType.f32]),[r.op_f64_convert_i32_s]:new n([i.WASMValueType.i32],[i.WASMValueType.f64]),[r.op_f64_convert_i32_u]:new n([i.WASMValueType.i32],[i.WASMValueType.f64]),[r.op_f64_convert_i64_s]:new n([i.WASMValueType.i64],[i.WASMValueType.f64]),[r.op_f64_convert_i64_u]:new n([i.WASMValueType.i64],[i.WASMValueType.f64]),[r.op_f64_promote_f32]:new n([i.WASMValueType.f32],[i.WASMValueType.f64]),[r.op_i32_reinterpret_f32]:new n([i.WASMValueType.f32],[i.WASMValueType.i32]),[r.op_i64_reinterpret_f64]:new n([i.WASMValueType.f64],[i.WASMValueType.i64]),[r.op_f32_reinterpret_i32]:new n([i.WASMValueType.i32],[i.WASMValueType.f32]),[r.op_f64_reinterpret_i64]:new n([i.WASMValueType.i64],[i.WASMValueType.f64]),[r.op_i32_extend8_s]:new n([i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i32_extend16_s]:new n([i.WASMValueType.i32],[i.WASMValueType.i32]),[r.op_i64_extend8_s]:new n([i.WASMValueType.i64],[i.WASMValueType.i64]),[r.op_i64_extend16_s]:new n([i.WASMValueType.i64],[i.WASMValueType.i64]),[r.op_i64_extend32_s]:new n([i.WASMValueType.i64],[i.WASMValueType.i64]),[r.op_i32_trunc_sat_f32_s]:new n([i.WASMValueType.f32],[i.WASMValueType.i32]),[r.op_i32_trunc_sat_f32_u]:new n([i.WASMValueType.f32],[i.WASMValueType.i32]),[r.op_i32_trunc_sat_f64_s]:new n([i.WASMValueType.f64],[i.WASMValueType.i32]),[r.op_i32_trunc_sat_f64_u]:new n([i.WASMValueType.f64],[i.WASMValueType.i32]),[r.op_i64_trunc_sat_f32_s]:new n([i.WASMValueType.f32],[i.WASMValueType.i64]),[r.op_i64_trunc_sat_f32_u]:new n([i.WASMValueType.f32],[i.WASMValueType.i64]),[r.op_i64_trunc_sat_f64_s]:new n([i.WASMValueType.f64],[i.WASMValueType.i64]),[r.op_i64_trunc_sat_f64_u]:new n([i.WASMValueType.f64],[i.WASMValueType.i64]),[r.op_memory_copy]:new n([i.WASMValueType.i32,i.WASMValueType.i32,i.WASMValueType.i32],[]),[r.op_memory_fill]:new n([i.WASMValueType.i32,i.WASMValueType.i32,i.WASMValueType.i32],[])}},444:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CONVERSION_FLOAT64=t.CONVERSION_INT64=t.CONVERSION_UINT64=t.CONVERSION_FLOAT32=t.CONVERSION_INT32=t.CONVERSION_UINT32=t.CONVERSION_INT16=t.CONVERSION_UINT16=t.CONVERSION_INT8=t.CONVERSION_UINT8=void 0,t.toConvert=function(e,o,i){if(o<0||o+i>e.length)throw new RangeError(`Memory slice [${o}, ${o+i}] out of bounds`);t.CONVERSION_UINT8.set(e.subarray(o,o+i),0)},t.fromConvert=function(e,o,i){if(o<0||o+i>e.length)throw new RangeError(`Memory slice [${o}, ${o+i}] out of bounds`);e.set(t.CONVERSION_UINT8.subarray(0,i),o)};const o=new ArrayBuffer(8);t.CONVERSION_UINT8=new Uint8Array(o),t.CONVERSION_INT8=new Int8Array(o),t.CONVERSION_UINT16=new Uint16Array(o),t.CONVERSION_INT16=new Int16Array(o),t.CONVERSION_UINT32=new Uint32Array(o),t.CONVERSION_INT32=new Int32Array(o),t.CONVERSION_FLOAT32=new Float32Array(o),t.CONVERSION_UINT64=new BigUint64Array(o),t.CONVERSION_INT64=new BigInt64Array(o),t.CONVERSION_FLOAT64=new Float64Array(o)},451:(e,t)=>{var o,i,r;function n(e){switch(e){case o.nil:return"any";case o.i32:return"i32";case o.f32:return"f32";case o.i64:return"i64";case o.f64:return"f32"}return"unk"}Object.defineProperty(t,"__esModule",{value:!0}),t.WASMGlobalType=t.WASMRefType=t.WASMDeclType=t.WASMValueType=void 0,t.typeToString=n,t.typeArrayToString=function(e){return e.map((e=>n(e))).join(" ")},function(e){e[e.nil=64]="nil",e[e.u32=65]="u32",e[e.f64=124]="f64",e[e.f32=125]="f32",e[e.i64=126]="i64",e[e.i32=127]="i32"}(o||(t.WASMValueType=o={})),function(e){e[e.func=0]="func",e[e.table=1]="table",e[e.mem=2]="mem",e[e.global=3]="global"}(i||(t.WASMDeclType=i={})),function(e){e[e.funcref=112]="funcref",e[e.externref=111]="externref"}(r||(t.WASMRefType=r={})),t.WASMGlobalType=class{constructor(){this.mutable=!1,this.type=o.i32}}},560:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertToExecForm=function(e){const t=new i.FixedLengthWriter;for(let o=0;o<e.section10.content.length;++o)t.write_u32(0);if(e.has_section(10))for(let o=0;o<e.section10.content.length;++o){const i=e.section10.content[o];t.retroactive_write_u32(t.at,4*o);const r=e.section1.content[e.section3.content[o].index];t.write_ctrl_arg(r.args.length);let _=0;for(const e of i.locals)_+=e.count;t.write_ctrl_arg(_),s(t,i.code,[],[]),t.write_u8(n.WASMOPCode.op_return),t.write_u32(0)}return t.toBuffer()};const i=o(984),r=o(904),n=o(438),_=o(451);function a(e,t){switch(t.type){case _.WASMValueType.u32:e.write_u32(t.u32);break;case _.WASMValueType.i32:e.write_i32(t.i32);break;case _.WASMValueType.f32:e.write_f32(t.f32);break;case _.WASMValueType.i64:e.write_i64(t.i64);break;case _.WASMValueType.f64:e.write_f64(t.f64)}}function s(e,t,o,i){for(const _ of t){if(_.instr===n.WASMOPCode.op_end)return;switch(e.write_instr(_.instr),_.instr){case n.WASMOPCode.op_block:{o.push([]),e.write_ctrl_arg(_.numDrop),s(e,_.child,o,i);const t=o.pop();if(null==t)throw new r.CompileError("Empty blockPtrStack, impossible");e.write_u8(n.WASMOPCode.op_end);for(const o of t)e.retroactive_write_u32(e.at,o);break}case n.WASMOPCode.op_if:{const t=e.at;if(e.write_u32(0),e.write_ctrl_arg(_.numDrop),o.push([]),s(e,_.child,o,i),_.hasElse){e.write_u8(n.WASMOPCode.op_br),e.write_ctrl_arg(_.numKeep);const r=e.at;e.write_u32(0),e.write_ctrl_arg(0),e.retroactive_write_u32(e.at,t),e.write_u8(n.WASMOPCode.op_else),e.write_ctrl_arg(_.numDrop),s(e,_.child2,o,i),e.write_u8(n.WASMOPCode.op_end),e.retroactive_write_u32(e.at,r)}else e.write_u8(n.WASMOPCode.op_end),e.retroactive_write_u32(e.at,t);const a=o.pop();if(null==a)throw new r.CompileError("Empty blockPtrStack, impossible");for(const t of a)e.retroactive_write_u32(e.at,t);break}case n.WASMOPCode.op_loop:{const t=e.at-1;e.write_ctrl_arg(_.numDrop),o.push([]),s(e,_.child,o,i);const a=o.pop();if(null==a)throw new r.CompileError("Empty blockPtrStack, impossible");for(const o of a)e.retroactive_write_u32(t,o);e.write_u8(n.WASMOPCode.op_end);break}case n.WASMOPCode.op_br_if:case n.WASMOPCode.op_br:{e.write_ctrl_arg(_.numKeep);const t=_.immediates[0].u32;if(t>=o.length)throw new RangeError(`Branch depth ${t} OOB, max is ${o.length-1}`);o[o.length-t-1].push(e.at),e.write_u32(0),e.write_ctrl_arg(t);break}case n.WASMOPCode.op_br_table:e.write_ctrl_arg(_.numKeep),e.write_ctrl_arg(_.immediates[0].u32);for(let t=0;t<_.immediates[0].u32+1;t++){const i=_.immediates[t+1].u32;if(i>=o.length)throw new RangeError(`Branch depth ${i} OOB, max is ${o.length-1}`);o[o.length-i-1].push(e.at),e.write_u32(0),e.write_ctrl_arg(i)}break;case n.WASMOPCode.op_call:e.write_ctrl_arg(_.immediates[0].u32);break;case n.WASMOPCode.op_call_indirect:case n.WASMOPCode.op_memory_size:case n.WASMOPCode.op_memory_grow:case n.WASMOPCode.op_memory_copy:case n.WASMOPCode.op_memory_fill:break;case n.WASMOPCode.op_i32_load:case n.WASMOPCode.op_i32_load8_s:case n.WASMOPCode.op_i32_load8_u:case n.WASMOPCode.op_i32_load16_s:case n.WASMOPCode.op_i32_load16_u:case n.WASMOPCode.op_i64_load:case n.WASMOPCode.op_i64_load8_s:case n.WASMOPCode.op_i64_load8_u:case n.WASMOPCode.op_i64_load16_s:case n.WASMOPCode.op_i64_load16_u:case n.WASMOPCode.op_i64_load32_s:case n.WASMOPCode.op_i64_load32_u:case n.WASMOPCode.op_f32_load:case n.WASMOPCode.op_f64_load:case n.WASMOPCode.op_i32_store:case n.WASMOPCode.op_i32_store8:case n.WASMOPCode.op_i32_store16:case n.WASMOPCode.op_i64_store:case n.WASMOPCode.op_i64_store8:case n.WASMOPCode.op_i64_store16:case n.WASMOPCode.op_i64_store32:case n.WASMOPCode.op_f32_store:case n.WASMOPCode.op_f64_store:e.write_u32(_.immediates[1].u32);break;case n.WASMOPCode.op_i32_const:case n.WASMOPCode.op_i64_const:case n.WASMOPCode.op_f32_const:case n.WASMOPCode.op_f64_const:a(e,_.immediates[0]);break;case n.WASMOPCode.op_local_get:case n.WASMOPCode.op_local_set:case n.WASMOPCode.op_local_tee:case n.WASMOPCode.op_global_get:case n.WASMOPCode.op_global_set:e.write_ctrl_arg(_.immediates[0].u32);break;case n.WASMOPCode.op_return:e.write_ctrl_arg(_.immediates[0].u32),e.write_ctrl_arg(_.numKeep)}}}},636:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WASMSection12Content=t.WASMSection11Content=t.WASMSection10Content=t.WASMSection9Content=t.WASMLocalEnum=t.WASMSection8Content=t.WASMSection7Content=t.WASMSection6Content=t.WASMSection4Content=t.WASMSection3Content=t.WASMSection2Content=t.WASMLimit=t.WASMFuncType=t.WASMSection=void 0;const i=o(438),r=o(451);t.WASMSection=class{constructor(){this.content=[]}};class n extends i.WASMOPDef{}t.WASMFuncType=n;class _{constructor(){this.hasMax=!1,this.min=0,this.max=0}}t.WASMLimit=_,t.WASMSection2Content=class{constructor(){this.module="",this.name="",this.kind=r.WASMDeclType.func,this.index=0,this.type=r.WASMValueType.nil,this.limits=new _}},t.WASMSection3Content=class{constructor(){this.index=0}},t.WASMSection4Content=class{constructor(){this.refKind=r.WASMRefType.funcref,this.limit=new _}},t.WASMSection6Content=class{constructor(){this.type=new r.WASMGlobalType,this.expr=[]}},t.WASMSection7Content=class{constructor(){this.name="",this.kind=0,this.index=0}},t.WASMSection8Content=class{constructor(){this.byteLen=0,this.index=0}},t.WASMLocalEnum=class{constructor(){this.type=r.WASMValueType.i32,this.count=0}},t.WASMSection9Content=class{constructor(){this.kind=0,this.offset=[],this.funcrefs=[]}},t.WASMSection10Content=class{constructor(){this.byteLen=0,this.locals=[],this.code=[]}},t.WASMSection11Content=class{constructor(){this.kind=0,this.memidx=0,this.offset=[],this.data=new Uint8Array(0)}},t.WASMSection12Content=class{constructor(){this.byteLen=0,this.dataCount=0}}},763:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.cloneValue=function(e){const t=new i.WASMValue;return t.type=e.type,t.set(e),t},t.newValue=_,t.newI32=function(e){const t=_();return t.type=r.WASMValueType.i32,t.i32=e,t},t.newF32=function(e){const t=_();return t.type=r.WASMValueType.f32,t.f32=e,t},t.newI64=function(e){const t=_();return t.type=r.WASMValueType.i64,t.i64=e,t},t.newF64=function(e){const t=_();return t.type=r.WASMValueType.f64,t.f64=e,t},t.freeVal=function(e){n.push(e)};const i=o(317),r=o(451),n=[];function _(){const e=n.pop();return void 0===e?new i.WASMValue:(e.type=r.WASMValueType.nil,e)}},818:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.typeStackPush=n,t.typeCheckArgs=_,t.typeCheckResults=function(e,t){const o=e.slice(0);if(_(e,t),0!==e.length&&e.pop()!==i.WASMValueType.nil)throw new TypeError(`Expected ${(0,i.typeArrayToString)(t)}, got ${(0,i.typeArrayToString)(o)}`)},t.typeArrayEq=function(e,t){if(e.length!==t.length)return!1;for(let o=0;o<e.length;++o)if(e[o]!==t[o])return!1;return!0},t.typeCheckDef=function(e,t){const o=r.WASMOPDefs[t];if(e.length<o.args.length)throw new RangeError(`Expected at least ${o.args.length} values on stack for ${t}, got ${e.length}`);_(e,o.args);for(const t of o.rets)n(e,t)};const i=o(451),r=o(438);function n(e,t){if(void 0===t)throw new Error("Impossible push");t!==i.WASMValueType.nil&&e.push(t)}function _(e,t){const o=e.slice(0);for(let r=t.length-1;r>=0;--r){if(0===e.length)throw new TypeError(`Expected args ${(0,i.typeArrayToString)(t)}, got ${(0,i.typeArrayToString)(o)}`);let n=e[e.length-1];if(n===i.WASMValueType.nil)return;if(e.pop(),n!==t[r])throw new TypeError(`Expected args ${(0,i.typeArrayToString)(t)}, got ${(0,i.typeArrayToString)(o)}`)}}},830:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toTruthy=function(e){return e?1:0},t.popcnt32=function(e){let t=0;return e>>>=0,e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,e+=e>>8,t+=63&(e+=e>>16),t},t.ctz32=function(e){return 0==(e>>>=0)?32:(e&=-e,31-Math.clz32(e))},t.rotl32=function(e,t){return e<<(t&=31)|e>>>32-t},t.rotr32=function(e,t){return e>>>(t&=31)|e<<32-t},t.rotl64=function(e,t){return e<<(t&=BigInt(63))|e>>BigInt(64)-t},t.rotr64=function(e,t){return e>>(t&=BigInt(63))|e<<BigInt(64)-t}},904:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CompileError=t.RuntimeError=t.LinkError=void 0,t.LinkError=Error,t.RuntimeError=Error,t.CompileError=Error},928:function(e,t,o){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(223)),n=i(o(51));class _ extends n.default{constructor(e){const t=performance.now();super(),new r.default(e).parse(this),console.log(`Compiling took ${(performance.now()-t).toFixed(2)}ms`)}}t.default=_},973:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){if(this.buffer=new ArrayBuffer,this._buffer=new Uint8Array(this.buffer),this.init=0,this.max=0,"object"!=typeof e)throw new Error("Invalid memory options: must be an object");if("number"==typeof e.maximum&&(this.max=e.maximum),"number"==typeof e.initial&&(this.init=e.initial),this.max<this.init)throw new Error("Memory limit must be greater than initial");this.max=Math.max(this.max,this.init),this.buffer=new ArrayBuffer(65536*this.init),this._buffer=new Uint8Array(this.buffer)}get length(){return 65536*this.init}}},984:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FixedLengthReader=t.FixedLengthWriter=t.CTRL_ARG_BYTELEN=t.Reader=void 0;const i=o(444),r=new TextDecoder;t.Reader=class{constructor(e){this.buf=e,this.at=0}has(){return this.at<this.buf.length}back(){this.at>0&&this.at--}read_uint8(){if(this.at>=this.buf.length)throw new Error("Unexpected EOF while reading u8");return this.buf[this.at++]}read_instr(){const e=this.read_uint8();return 252===e?e|this.read_uint8()<<8:e}read_uint32(){let e=0,t=0,o=this.read_uint8();for(;128&o;){if(e|=(127&o)<<t,t+=7,t>=32)throw new RangeError("Malformed leb128 u32");o=this.read_uint8()}return e|=o<<t,e>>>0}read_int32(){let e=0,t=0,o=this.read_uint8();for(;128&o;){if(e|=(127&o)<<t,t+=7,t>=32)throw new RangeError("Malformed leb128 i32");o=this.read_uint8()}return e|=o<<t,64&o&&t<=21&&(e|=-1<<t+7),0|e}read_uint64(){i.CONVERSION_UINT64[0]=BigInt(0);let e=BigInt(0),t=BigInt(this.read_uint8());for(;t&BigInt(128);){if(i.CONVERSION_UINT64[0]|=(t&BigInt(127))<<e,e+=BigInt(7),e>=BigInt(64))throw new RangeError("Malformed leb128 u64");t=BigInt(this.read_uint8())}return i.CONVERSION_UINT64[0]|=t<<e,i.CONVERSION_UINT64[0]}read_int64(){i.CONVERSION_INT64[0]=BigInt(0);let e=BigInt(0),t=BigInt(this.read_uint8());for(;t&BigInt(128);){if(i.CONVERSION_INT64[0]|=(t&BigInt(127))<<e,e+=BigInt(7),e>=BigInt(64))throw new RangeError("Malformed leb128 i64");t=BigInt(this.read_uint8())}return i.CONVERSION_INT64[0]|=t<<e,t&BigInt(64)&&e<=BigInt(56)&&(i.CONVERSION_INT64[0]|=~BigInt(0)<<e+BigInt(7)),i.CONVERSION_INT64[0]}read_float32(){if(this.at+4>=this.buf.length)throw new RangeError("Unexpected EOF while reading f32");return i.CONVERSION_UINT8.set(this.buf.subarray(this.at,this.at+=4),0),i.CONVERSION_FLOAT32[0]}read_float64(){if(this.at+8>=this.buf.length)throw new RangeError("Unexpected EOF while reading f32");return i.CONVERSION_UINT8.set(this.buf.subarray(this.at,this.at+=8),0),i.CONVERSION_FLOAT64[0]}read_string(){const e=this.read_uint32();if(this.at+e>=this.buf.length)throw new RangeError(`Unexpected EOF while reading string of length ${e}`);return r.decode(this.buf.slice(this.at,this.at+=e))}},t.CTRL_ARG_BYTELEN=2,t.FixedLengthWriter=class{constructor(){this.buf=[],this.at=0}toBuffer(){return new Uint8Array(this.buf)}write_u8(e){i.CONVERSION_UINT8[0]=e,this.buf[this.at++]=i.CONVERSION_UINT8[0]}write_instr(e){this.write_u8(e),252==(255&e)&&this.write_u8(e>>8)}write_ctrl_arg(e){i.CONVERSION_UINT32[0]=e;for(let e=0;e<t.CTRL_ARG_BYTELEN;++e)this.buf[this.at++]=i.CONVERSION_UINT8[e]}retroactive_write_u32(e,t){i.CONVERSION_UINT32[0]=e;for(let e=0;e<4;++e)this.buf[t+e]=i.CONVERSION_UINT8[e]}write_u32(e){i.CONVERSION_UINT32[0]=e;for(let e=0;e<4;++e)this.buf[this.at++]=i.CONVERSION_UINT8[e]}write_i32(e){i.CONVERSION_INT32[0]=e;for(let e=0;e<4;++e)this.buf[this.at++]=i.CONVERSION_UINT8[e]}write_f32(e){i.CONVERSION_FLOAT32[0]=e;for(let e=0;e<4;++e)this.buf[this.at++]=i.CONVERSION_UINT8[e]}write_i64(e){i.CONVERSION_INT64[0]=e;for(let e=0;e<8;++e)this.buf[this.at++]=i.CONVERSION_UINT8[e]}write_f64(e){i.CONVERSION_FLOAT64[0]=e;for(let e=0;e<8;++e)this.buf[this.at++]=i.CONVERSION_UINT8[e]}},t.FixedLengthReader=class{constructor(e){this.at=0,this.buf=e}read_u8(){return this.buf[this.at++]}read_instr(){const e=this.read_u8();return 252===e?this.read_u8()<<8|e:e}read_ctrl_arg(){i.CONVERSION_UINT32[0]=0;for(let e=0;e<t.CTRL_ARG_BYTELEN;++e)i.CONVERSION_UINT8[e]=this.read_u8();return i.CONVERSION_UINT32[0]}read_u32(){for(let e=0;e<4;++e)i.CONVERSION_UINT8[e]=this.read_u8();return i.CONVERSION_UINT32[0]}read_i32(){for(let e=0;e<4;++e)i.CONVERSION_UINT8[e]=this.read_u8();return i.CONVERSION_INT32[0]}read_f32(){for(let e=0;e<4;++e)i.CONVERSION_UINT8[e]=this.read_u8();return i.CONVERSION_FLOAT32[0]}read_i64(){for(let e=0;e<8;++e)i.CONVERSION_UINT8[e]=this.read_u8();return i.CONVERSION_INT64[0]}read_f64(){for(let e=0;e<8;++e)i.CONVERSION_UINT8[e]=this.read_u8();return i.CONVERSION_FLOAT64[0]}}}},t={},o=function o(i){var r=t[i];if(void 0!==r)return r.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,o),n.exports}(156);return o.default})()));